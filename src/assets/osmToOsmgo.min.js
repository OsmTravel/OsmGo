var osmToOsmgo=function(t){"use strict";function e(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||r(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=r(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function a(t,e){return t(e={exports:{}},e.exports),e.exports}var s=a((function(t,e){const r=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n="["+r+"][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",o=new RegExp("^"+n+"$");e.isExist=function(t){return void 0!==t},e.isEmptyObject=function(t){return 0===Object.keys(t).length},e.merge=function(t,e,r){if(e){const n=Object.keys(e),o=n.length;for(let i=0;i<o;i++)t[n[i]]="strict"===r?[e[n[i]]]:e[n[i]]}},e.getValue=function(t){return e.isExist(t)?t:""},e.buildOptions=function(t,e,r){var n={};if(!t)return e;for(let o=0;o<r.length;o++)void 0!==t[r[o]]?n[r[o]]=t[r[o]]:n[r[o]]=e[r[o]];return n},e.isTagNameInArrayMode=function(t,e,r){return!1!==e&&(e instanceof RegExp?e.test(t):"function"==typeof e?!!e(t,r):"strict"===e)},e.isName=function(t){const e=o.exec(t);return!(null==e)},e.getAllMatches=function(t,e){const r=[];let n=e.exec(t);for(;n;){const o=[],i=n.length;for(let t=0;t<i;t++)o.push(n[t]);r.push(o),n=e.exec(t)}return r},e.nameRegexp=n}));s.isExist,s.isEmptyObject,s.merge,s.getValue,s.buildOptions,s.isTagNameInArrayMode,s.isName,s.getAllMatches,s.nameRegexp;const u=function(t,e,r){const n={};if((!t.child||s.isEmptyObject(t.child))&&(!t.attrsMap||s.isEmptyObject(t.attrsMap)))return s.isExist(t.val)?t.val:"";if(s.isExist(t.val)&&("string"!=typeof t.val||""!==t.val&&t.val!==e.cdataPositionChar)){const o=s.isTagNameInArrayMode(t.tagname,e.arrayMode,r);n[e.textNodeName]=o?[t.val]:t.val}s.merge(n,t.attrsMap,e.arrayMode);const o=Object.keys(t.child);for(let i=0;i<o.length;i++){const a=o[i];if(t.child[a]&&t.child[a].length>1){n[a]=[];for(let r in t.child[a])t.child[a].hasOwnProperty(r)&&n[a].push(u(t.child[a][r],e,a))}else{const o=u(t.child[a][0],e,a),i=!0===e.arrayMode&&"object"==typeof o||s.isTagNameInArrayMode(a,e.arrayMode,r);n[a]=i?[o]:o}}return n};var l={convertToJson:u},c=function(t,e,r){this.tagname=t,this.parent=e,this.child={},this.attrsMap={},this.val=r,this.addChild=function(t){Array.isArray(this.child[t.tagname])?this.child[t.tagname].push(t):this.child[t.tagname]=[t]}};const f=s.buildOptions;"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,s.nameRegexp),!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const h={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",tagValueProcessor:function(t,e){return t},attrValueProcessor:function(t,e){return t},stopNodes:[]};var p=h;const g=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","stopNodes"];var d=g;function y(t,e,r){return e&&(r.trimValues&&(e=e.trim()),e=b(e=r.tagValueProcessor(e,t),r.parseNodeValue,r.parseTrueNumberOnly)),e}function v(t,e){if(e.ignoreNameSpace){const e=t.split(":"),r="/"===t.charAt(0)?"/":"";if("xmlns"===e[0])return"";2===e.length&&(t=r+e[1])}return t}function b(t,e,r){if(e&&"string"==typeof t){let e;return""===t.trim()||isNaN(t)?e="true"===t||"false"!==t&&t:(-1!==t.indexOf("0x")?e=Number.parseInt(t,16):-1!==t.indexOf(".")?(e=Number.parseFloat(t),t=t.replace(/\.?0+$/,"")):e=Number.parseInt(t,10),r&&(e=String(e)===t?e:t)),e}return s.isExist(t)?t:""}const m=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g");function w(t,e){if(!e.ignoreAttributes&&"string"==typeof t){t=t.replace(/\r?\n/g," ");const r=s.getAllMatches(t,m),n=r.length,o={};for(let t=0;t<n;t++){const n=v(r[t][1],e);n.length&&(void 0!==r[t][4]?(e.trimValues&&(r[t][4]=r[t][4].trim()),r[t][4]=e.attrValueProcessor(r[t][4],n),o[e.attributeNamePrefix+n]=b(r[t][4],e.parseAttributeValue,e.parseTrueNumberOnly)):e.allowBooleanAttributes&&(o[e.attributeNamePrefix+n]=!0))}if(!Object.keys(o).length)return;if(e.attrNodeName){const t={};return t[e.attrNodeName]=o,t}return o}}function j(t,e){let r,n="";for(let o=e;o<t.length;o++){let e=t[o];if(r)e===r&&(r="");else if('"'===e||"'"===e)r=e;else{if(">"===e)return{data:n,index:o};"\t"===e&&(e=" ")}n+=e}}function A(t,e,r,n){const o=t.indexOf(e,r);if(-1===o)throw new Error(n);return o+e.length-1}var E={defaultOptions:p,props:d,getTraversalObj:function(t,e){t=t.replace(/\r\n?/g,"\n"),e=f(e,h,g);const r=new c("!xml");let n=r,o="";for(let r=0;r<t.length;r++){if("<"===t[r])if("/"===t[r+1]){const i=A(t,">",r,"Closing Tag is not closed.");let a=t.substring(r+2,i).trim();if(e.ignoreNameSpace){const t=a.indexOf(":");-1!==t&&(a=a.substr(t+1))}n&&(n.val?n.val=s.getValue(n.val)+""+y(a,o,e):n.val=y(a,o,e)),e.stopNodes.length&&e.stopNodes.includes(n.tagname)&&(n.child=[],null==n.attrsMap&&(n.attrsMap={}),n.val=t.substr(n.startIndex+1,r-n.startIndex-1)),n=n.parent,o="",r=i}else if("?"===t[r+1])r=A(t,"?>",r,"Pi Tag is not closed.");else if("!--"===t.substr(r+1,3))r=A(t,"--\x3e",r,"Comment is not closed.");else if("!D"===t.substr(r+1,2)){const e=A(t,">",r,"DOCTYPE is not closed.");r=t.substring(r,e).indexOf("[")>=0?t.indexOf("]>",r)+1:e}else if("!["===t.substr(r+1,2)){const i=A(t,"]]>",r,"CDATA is not closed.")-2,a=t.substring(r+9,i);if(o&&(n.val=s.getValue(n.val)+""+y(n.tagname,o,e),o=""),e.cdataTagName){const t=new c(e.cdataTagName,n,a);n.addChild(t),n.val=s.getValue(n.val)+e.cdataPositionChar,a&&(t.val=a)}else n.val=(n.val||"")+(a||"");r=i+2}else{const i=j(t,r+1);let a=i.data;const u=i.index,l=a.indexOf(" ");let f=a,h=!0;if(-1!==l&&(f=a.substr(0,l).replace(/\s\s*$/,""),a=a.substr(l+1)),e.ignoreNameSpace){const t=f.indexOf(":");-1!==t&&(f=f.substr(t+1),h=f!==i.data.substr(t+1))}if(n&&o&&"!xml"!==n.tagname&&(n.val=s.getValue(n.val)+""+y(n.tagname,o,e)),a.length>0&&a.lastIndexOf("/")===a.length-1){"/"===f[f.length-1]?(f=f.substr(0,f.length-1),a=f):a=a.substr(0,a.length-1);const t=new c(f,n,"");f!==a&&(t.attrsMap=w(a,e)),n.addChild(t)}else{const t=new c(f,n);e.stopNodes.length&&e.stopNodes.includes(t.tagname)&&(t.startIndex=u),f!==a&&h&&(t.attrsMap=w(a,e)),n.addChild(t),n=t}o="",r=u}else o+=t[r]}return r}};const x={allowBooleanAttributes:!1},_=["allowBooleanAttributes"];function O(t,e){for(var r=e;e<t.length;e++)if("?"!=t[e]&&" "!=t[e]);else{var n=t.substr(r,e-r);if(e>5&&"xml"===n)return k("InvalidXml","XML declaration allowed only at the start of the document.",M(t,e));if("?"==t[e]&&">"==t[e+1]){e++;break}}return e}function N(t,e){if(t.length>e+5&&"-"===t[e+1]&&"-"===t[e+2]){for(e+=3;e<t.length;e++)if("-"===t[e]&&"-"===t[e+1]&&">"===t[e+2]){e+=2;break}}else if(t.length>e+8&&"D"===t[e+1]&&"O"===t[e+2]&&"C"===t[e+3]&&"T"===t[e+4]&&"Y"===t[e+5]&&"P"===t[e+6]&&"E"===t[e+7]){let r=1;for(e+=8;e<t.length;e++)if("<"===t[e])r++;else if(">"===t[e]&&(r--,0===r))break}else if(t.length>e+9&&"["===t[e+1]&&"C"===t[e+2]&&"D"===t[e+3]&&"A"===t[e+4]&&"T"===t[e+5]&&"A"===t[e+6]&&"["===t[e+7])for(e+=8;e<t.length;e++)if("]"===t[e]&&"]"===t[e+1]&&">"===t[e+2]){e+=2;break}return e}function P(t,e){let r="",n="",o=!1;for(;e<t.length;e++){if('"'===t[e]||"'"===t[e])if(""===n)n=t[e];else{if(n!==t[e])continue;n=""}else if(">"===t[e]&&""===n){o=!0;break}r+=t[e]}return""===n&&{value:r,index:e,tagClosed:o}}const S=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function C(t,e){const r=s.getAllMatches(t,S),n={};for(let o=0;o<r.length;o++){if(0===r[o][1].length)return k("InvalidAttr","Attribute '"+r[o][2]+"' has no space in starting.",I(t,r[o][0]));if(void 0===r[o][3]&&!e.allowBooleanAttributes)return k("InvalidAttr","boolean attribute '"+r[o][2]+"' is not allowed.",I(t,r[o][0]));const i=r[o][2];if(!F(i))return k("InvalidAttr","Attribute '"+i+"' is an invalid name.",I(t,r[o][0]));if(n.hasOwnProperty(i))return k("InvalidAttr","Attribute '"+i+"' is repeated.",I(t,r[o][0]));n[i]=1}return!0}function T(t,e){if(";"===t[++e])return-1;if("#"===t[e])return function(t,e){let r=/\d/;for("x"===t[e]&&(e++,r=/[\da-fA-F]/);e<t.length;e++){if(";"===t[e])return e;if(!t[e].match(r))break}return-1}(t,++e);let r=0;for(;e<t.length;e++,r++)if(!(t[e].match(/\w/)&&r<20)){if(";"===t[e])break;return-1}return e}function k(t,e,r){return{err:{code:t,msg:e,line:r}}}function F(t){return s.isName(t)}function M(t,e){return t.substring(0,e).split(/\r?\n/).length}function I(t,e){return t.indexOf(e)+e.length}var V=function(t,e){e=s.buildOptions(e,x,_);const r=[];let n=!1,o=!1;"\ufeff"===t[0]&&(t=t.substr(1));for(let a=0;a<t.length;a++)if("<"===t[a]&&"?"===t[a+1]){if(a+=2,a=O(t,a),a.err)return a}else{if("<"!==t[a]){if(" "===t[a]||"\t"===t[a]||"\n"===t[a]||"\r"===t[a])continue;return k("InvalidChar","char '"+t[a]+"' is not expected.",M(t,a))}if(a++,"!"===t[a]){a=N(t,a);continue}{let u=!1;"/"===t[a]&&(u=!0,a++);let l="";for(;a<t.length&&">"!==t[a]&&" "!==t[a]&&"\t"!==t[a]&&"\n"!==t[a]&&"\r"!==t[a];a++)l+=t[a];if(l=l.trim(),"/"===l[l.length-1]&&(l=l.substring(0,l.length-1),a--),i=l,!s.isName(i)){let e;return e=0===l.trim().length?"There is an unnecessary space between tag name and backward slash '</ ..'.":"Tag '"+l+"' is an invalid name.",k("InvalidTag",e,M(t,a))}const c=P(t,a);if(!1===c)return k("InvalidAttr","Attributes for '"+l+"' have open quote.",M(t,a));let f=c.value;if(a=c.index,"/"===f[f.length-1]){f=f.substring(0,f.length-1);const r=C(f,e);if(!0!==r)return k(r.err.code,r.err.msg,M(t,a-f.length+r.err.line));n=!0}else if(u){if(!c.tagClosed)return k("InvalidTag","Closing tag '"+l+"' doesn't have proper closing.",M(t,a));if(f.trim().length>0)return k("InvalidTag","Closing tag '"+l+"' can't have attributes or invalid starting.",M(t,a));{const e=r.pop();if(l!==e)return k("InvalidTag","Closing tag '"+e+"' is expected inplace of '"+l+"'.",M(t,a));0==r.length&&(o=!0)}}else{const i=C(f,e);if(!0!==i)return k(i.err.code,i.err.msg,M(t,a-f.length+i.err.line));if(!0===o)return k("InvalidXml","Multiple possible root nodes found.",M(t,a));r.push(l),n=!0}for(a++;a<t.length;a++)if("<"===t[a]){if("!"===t[a+1]){a++,a=N(t,a);continue}if("?"!==t[a+1])break;if(a=O(t,++a),a.err)return a}else if("&"===t[a]){const e=T(t,a);if(-1==e)return k("InvalidChar","char '&' is not expected.",M(t,a));a=e}"<"===t[a]&&a--}}var i;return n?!(r.length>0)||k("InvalidXml","Invalid '"+JSON.stringify(r,null,4).replace(/\r?\n/g,"")+"' found.",1):k("InvalidXml","Start tag expected.",1)};const D=function(t){return String.fromCharCode(t)},L={nilChar:D(176),missingChar:D(201),nilPremitive:D(175),missingPremitive:D(200),emptyChar:D(178),emptyValue:D(177),boundryChar:D(179),objStart:D(198),arrStart:D(204),arrayEnd:D(185)},B=[L.nilChar,L.nilPremitive,L.missingChar,L.missingPremitive,L.boundryChar,L.emptyChar,L.emptyValue,L.arrayEnd,L.objStart,L.arrStart],q=function(t,e,r){if("string"==typeof e)return t&&t[0]&&void 0!==t[0].val?R(t[0].val):R(t);{const o=void 0===(n=t)?L.missingChar:null===n?L.nilChar:!(n.child&&0===Object.keys(n.child).length&&(!n.attrsMap||0===Object.keys(n.attrsMap).length))||L.emptyChar;if(!0===o){let n="";if(Array.isArray(e)){n+=L.arrStart;const o=e[0],i=t.length;if("string"==typeof o)for(let e=0;e<i;e++){const r=R(t[e].val);n=z(n,r)}else for(let e=0;e<i;e++){const i=q(t[e],o,r);n=z(n,i)}n+=L.arrayEnd}else{n+=L.objStart;const o=Object.keys(e);Array.isArray(t)&&(t=t[0]);for(let i in o){const a=o[i];let s;s=!r.ignoreAttributes&&t.attrsMap&&t.attrsMap[a]?q(t.attrsMap[a],e[a],r):a===r.textNodeName?q(t.val,e[a],r):q(t.child[a],e[a],r),n=z(n,s)}}return n}return o}var n},R=function(t){switch(t){case void 0:return L.missingPremitive;case null:return L.nilPremitive;case"":return L.emptyValue;default:return t}},z=function(t,e){return G(e[0])||G(t[t.length-1])||(t+=L.boundryChar),t+e},G=function(t){return-1!==B.indexOf(t)};const U=s.buildOptions;var J={convert2nimn:function(t,e,r){return r=U(r,E.defaultOptions,E.props),q(t,e,r)}};const $=s.buildOptions,W=function(t,e,r){let n="{";const o=Object.keys(t.child);for(let r=0;r<o.length;r++){var i=o[r];if(t.child[i]&&t.child[i].length>1){for(var a in n+='"'+i+'" : [ ',t.child[i])n+=W(t.child[i][a],e)+" , ";n=n.substr(0,n.length-1)+" ] "}else n+='"'+i+'" : '+W(t.child[i][0],e)+" ,"}return s.merge(n,t.attrsMap),s.isEmptyObject(n)?s.isExist(t.val)?t.val:"":(s.isExist(t.val)&&("string"!=typeof t.val||""!==t.val&&t.val!==e.cdataPositionChar)&&(n+='"'+e.textNodeName+'" : '+(!0!==(u=t.val)&&!1!==u&&isNaN(u)?'"'+u+'"':u)),","===n[n.length-1]&&(n=n.substr(0,n.length-2)),n+"}");var u};var X={convertToJsonString:function(t,e){return(e=$(e,E.defaultOptions,E.props)).indentBy=e.indentBy||"",W(t,e)}};const K=s.buildOptions,Y={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(t){return t},attrValueProcessor:function(t){return t}},Z=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor"];function H(t){this.options=K(t,Y,Z),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=at),this.options.cdataTagName?this.isCDATA=st:this.isCDATA=function(){return!1},this.replaceCDATAstr=Q,this.replaceCDATAarr=tt,this.options.format?(this.indentate=it,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=ot,this.buildObjNode=rt):(this.buildTextNode=nt,this.buildObjNode=et),this.buildTextValNode=nt,this.buildObjectNode=et}function Q(t,e){return t=this.options.tagValueProcessor(""+t),""===this.options.cdataPositionChar||""===t?t+"<![CDATA["+e+"]]"+this.tagEndChar:t.replace(this.options.cdataPositionChar,"<![CDATA["+e+"]]"+this.tagEndChar)}function tt(t,e){if(t=this.options.tagValueProcessor(""+t),""===this.options.cdataPositionChar||""===t)return t+"<![CDATA["+e.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(let r in e)t=t.replace(this.options.cdataPositionChar,"<![CDATA["+e[r]+"]]>");return t+this.newLine}function et(t,e,r,n){return r&&!t.includes("<")?this.indentate(n)+"<"+e+r+">"+t+"</"+e+this.tagEndChar:this.indentate(n)+"<"+e+r+this.tagEndChar+t+this.indentate(n)+"</"+e+this.tagEndChar}function rt(t,e,r,n){return""!==t?this.buildObjectNode(t,e,r,n):this.indentate(n)+"<"+e+r+"/"+this.tagEndChar}function nt(t,e,r,n){return this.indentate(n)+"<"+e+r+">"+this.options.tagValueProcessor(t)+"</"+e+this.tagEndChar}function ot(t,e,r,n){return""!==t?this.buildTextValNode(t,e,r,n):this.indentate(n)+"<"+e+r+"/"+this.tagEndChar}function it(t){return this.options.indentBy.repeat(t)}function at(t){return!!t.startsWith(this.options.attributeNamePrefix)&&t.substr(this.attrPrefixLen)}function st(t){return t===this.options.cdataTagName}H.prototype.parse=function(t){return this.j2x(t,0).val},H.prototype.j2x=function(t,e){let r="",n="";const o=Object.keys(t),i=o.length;for(let a=0;a<i;a++){const i=o[a];if(void 0===t[i]);else if(null===t[i])n+=this.indentate(e)+"<"+i+"/"+this.tagEndChar;else if(t[i]instanceof Date)n+=this.buildTextNode(t[i],i,"",e);else if("object"!=typeof t[i]){const o=this.isAttribute(i);o?r+=" "+o+'="'+this.options.attrValueProcessor(""+t[i])+'"':this.isCDATA(i)?t[this.options.textNodeName]?n+=this.replaceCDATAstr(t[this.options.textNodeName],t[i]):n+=this.replaceCDATAstr("",t[i]):i===this.options.textNodeName?t[this.options.cdataTagName]||(n+=this.options.tagValueProcessor(""+t[i])):n+=this.buildTextNode(t[i],i,"",e)}else if(Array.isArray(t[i]))if(this.isCDATA(i))n+=this.indentate(e),t[this.options.textNodeName]?n+=this.replaceCDATAarr(t[this.options.textNodeName],t[i]):n+=this.replaceCDATAarr("",t[i]);else{const r=t[i].length;for(let o=0;o<r;o++){const r=t[i][o];if(void 0===r);else if(null===r)n+=this.indentate(e)+"<"+i+"/"+this.tagEndChar;else if("object"==typeof r){const t=this.j2x(r,e+1);n+=this.buildObjNode(t.val,i,t.attrStr,e)}else n+=this.buildTextNode(r,i,"",e)}}else if(this.options.attrNodeName&&i===this.options.attrNodeName){const e=Object.keys(t[i]),n=e.length;for(let o=0;o<n;o++)r+=" "+e[o]+'="'+this.options.attrValueProcessor(""+t[i][e[o]])+'"'}else{const r=this.j2x(t[i],e+1);n+=this.buildObjNode(r.val,i,r.attrStr,e)}}return{attrStr:r,val:n}};var ut=H,lt=a((function(t,e){const r=E,n=s.buildOptions;e.parse=function(t,e,o){if(o){!0===o&&(o={});const e=V(t,o);if(!0!==e)throw Error(e.err.msg)}e=n(e,r.defaultOptions,r.props);const i=E.getTraversalObj(t,e);return l.convertToJson(i,e)},e.convertTonimn=J.convert2nimn,e.getTraversalObj=E.getTraversalObj,e.convertToJson=l.convertToJson,e.convertToJsonString=X.convertToJsonString,e.validate=V,e.j2xParser=ut,e.parseToNimn=function(t,r,n){return e.convertTonimn(e.getTraversalObj(t,n),r,n)}}));function ct(t,e,r){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ft(t[0])||!ft(t[1]))throw new Error("coordinates must contain numbers");return function(t,e,r){if(!ht(r=r||{}))throw new Error("options is invalid");var n=r.bbox,o=r.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");n&&pt(n),o&&gt(o);var i={type:"Feature"};return o&&(i.id=o),n&&(i.bbox=n),i.properties=e||{},i.geometry=t,i}({type:"Point",coordinates:t},e,r)}function ft(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function ht(t){return!!t&&t.constructor===Object}function pt(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!ft(t))throw new Error("bbox must only contain numbers")}))}function gt(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function dt(t,e,r){if(null!==t)for(var n,o,i,a,s,u,l,c,f=0,h=0,p=t.type,g="FeatureCollection"===p,d="Feature"===p,y=g?t.features.length:1,v=0;v<y;v++){s=(c=!!(l=g?t.features[v].geometry:d?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var b=0;b<s;b++){var m=0,w=0;if(null!==(a=c?l.geometries[b]:l)){u=a.coordinates;var j=a.type;switch(f=!r||"Polygon"!==j&&"MultiPolygon"!==j?0:1,j){case null:break;case"Point":if(!1===e(u,h,v,m,w))return!1;h++,m++;break;case"LineString":case"MultiPoint":for(n=0;n<u.length;n++){if(!1===e(u[n],h,v,m,w))return!1;h++,"MultiPoint"===j&&m++}"LineString"===j&&m++;break;case"Polygon":case"MultiLineString":for(n=0;n<u.length;n++){for(o=0;o<u[n].length-f;o++){if(!1===e(u[n][o],h,v,m,w))return!1;h++}"MultiLineString"===j&&m++,"Polygon"===j&&w++}"Polygon"===j&&m++;break;case"MultiPolygon":for(n=0;n<u.length;n++){for("MultiPolygon"===j&&(w=0),o=0;o<u[n].length;o++){for(i=0;i<u[n][o].length-f;i++){if(!1===e(u[n][o][i],h,v,m,w))return!1;h++}w++}m++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(!1===dt(a.geometries[n],e,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function yt(t){var e=[];return"FeatureCollection"===t.type?function(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var r=0;r<t.features.length&&!1!==e(t.features[r],r);r++);}(t,(function(t){dt(t,(function(r){e.push(ct(r,t.properties))}))})):dt(t,(function(r){e.push(ct(r,t.properties))})),function(t,e){if(!ht(e=e||{}))throw new Error("options is invalid");var r=e.bbox,n=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");r&&pt(r),n&&gt(n);var o={type:"FeatureCollection"};return n&&(o.id=n),r&&(o.bbox=r),o.features=t,o}(e)}function vt(t,e,r){if(null!==t)for(var n,o,i,a,s,u,l,c,f=0,h=0,p=t.type,g="FeatureCollection"===p,d="Feature"===p,y=g?t.features.length:1,v=0;v<y;v++){s=(c=!!(l=g?t.features[v].geometry:d?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var b=0;b<s;b++){var m=0,w=0;if(null!==(a=c?l.geometries[b]:l)){u=a.coordinates;var j=a.type;switch(f=!r||"Polygon"!==j&&"MultiPolygon"!==j?0:1,j){case null:break;case"Point":if(!1===e(u,h,v,m,w))return!1;h++,m++;break;case"LineString":case"MultiPoint":for(n=0;n<u.length;n++){if(!1===e(u[n],h,v,m,w))return!1;h++,"MultiPoint"===j&&m++}"LineString"===j&&m++;break;case"Polygon":case"MultiLineString":for(n=0;n<u.length;n++){for(o=0;o<u[n].length-f;o++){if(!1===e(u[n][o],h,v,m,w))return!1;h++}"MultiLineString"===j&&m++,"Polygon"===j&&w++}"Polygon"===j&&m++;break;case"MultiPolygon":for(n=0;n<u.length;n++){for("MultiPolygon"===j&&(w=0),o=0;o<u[n].length;o++){for(i=0;i<u[n][o].length-f;i++){if(!1===e(u[n][o][i],h,v,m,w))return!1;h++}w++}m++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(!1===vt(a.geometries[n],e,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function bt(t){var e=[1/0,1/0,-1/0,-1/0];return vt(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}function mt(t,e,r){if(!jt(r=r||{}))throw new Error("options is invalid");var n=r.bbox,o=r.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");n&&function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!wt(t))throw new Error("bbox must only contain numbers")}))}(n),o&&function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}(o);var i={type:"Feature"};return o&&(i.id=o),n&&(i.bbox=n),i.properties=e||{},i.geometry=t,i}function wt(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function jt(t){return!!t&&t.constructor===Object}function At(t,e){if(!jt(e=e||{}))throw new Error("options is invalid");var r=e.properties;if(!t)throw new Error("geojson is required");var n=bt(t);return function(t,e,r){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!wt(t[0])||!wt(t[1]))throw new Error("coordinates must contain numbers");return mt({type:"Point",coordinates:t},e,r)}([(n[0]+n[2])/2,(n[1]+n[3])/2],r)}function Et(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return xt(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach((function(r){switch(r){case"type":case"features":return;default:e[r]=t[r]}})),e.features=t.features.map((function(t){return xt(t)})),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Ot(t);default:throw new Error("unknown GeoJSON type")}}function xt(t){var e={type:"Feature"};return Object.keys(t).forEach((function(r){switch(r){case"type":case"properties":case"geometry":return;default:e[r]=t[r]}})),e.properties=_t(t.properties),e.geometry=Ot(t.geometry),e}function _t(t){var e={};return t?(Object.keys(t).forEach((function(r){var n=t[r];"object"==typeof n?null===n?e[r]=null:n.length?e[r]=n.map((function(t){return t})):e[r]=_t(n):e[r]=n})),e):e}function Ot(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return Ot(t)})),e):(e.coordinates=Nt(t.coordinates),e)}function Nt(t){return"object"!=typeof t[0]?t.slice():t.map((function(t){return Nt(t)}))}lt.parse,lt.convertTonimn,lt.getTraversalObj,lt.convertToJson,lt.convertToJsonString,lt.validate,lt.j2xParser,lt.parseToNimn;var Pt=6371008.8,St={meters:Pt,metres:Pt,millimeters:6371008800,millimetres:6371008800,centimeters:637100880,centimetres:637100880,kilometers:6371.0088,kilometres:6371.0088,miles:3958.761333810546,nauticalmiles:Pt/1852,inches:39.37*Pt,yards:5825721.287490856,feet:20902260.511392,radians:1,degrees:57.22891354143274};function Ct(t){if(null==t)throw new Error("degrees is required");return t%360*Math.PI/180}function Tt(t){if(!t)throw new Error("coord is required");if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates;if(Array.isArray(t)&&t.length>=2&&void 0===t[0].length&&void 0===t[1].length)return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function kt(t,e,r){if(!(n=r=r||{})||n.constructor!==Object)throw new Error("options is invalid");var n,o=r.units,i=Tt(t),a=Tt(e),s=Ct(a[1]-i[1]),u=Ct(a[0]-i[0]),l=Ct(i[1]),c=Ct(a[1]),f=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(u/2),2)*Math.cos(l)*Math.cos(c);return function(t,e){if(null==t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var r=St[e||"kilometers"];if(!r)throw new Error(e+" units is invalid");return t*r}(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),o)}function Ft(t,e,r){if(!Vt(r=r||{}))throw new Error("options is invalid");var n=r.bbox,o=r.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");n&&Dt(n),o&&Lt(o);var i={type:"Feature"};return o&&(i.id=o),n&&(i.bbox=n),i.properties=e||{},i.geometry=t,i}function Mt(t,e){if(!Vt(e=e||{}))throw new Error("options is invalid");var r=e.bbox,n=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");r&&Dt(r),n&&Lt(n);var o={type:"FeatureCollection"};return n&&(o.id=n),r&&(o.bbox=r),o.features=t,o}function It(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function Vt(t){return!!t&&t.constructor===Object}function Dt(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!It(t))throw new Error("bbox must only contain numbers")}))}function Lt(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function Bt(t,e,r){if("object"!=typeof(r=r||{}))throw new Error("options is invalid");var n=r.ignoreBoundary;if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var o=function(t){if(!t)throw new Error("coord is required");if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates;if(Array.isArray(t)&&t.length>=2&&void 0===t[0].length&&void 0===t[1].length)return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}(t),i=function(t){if(!t)throw new Error("coords is required");if("Feature"===t.type&&null!==t.geometry)return t.geometry.coordinates;if(t.coordinates)return t.coordinates;if(Array.isArray(t))return t;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}(e),a=e.geometry?e.geometry.type:e.type,s=e.bbox;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(o,s))return!1;"Polygon"===a&&(i=[i]);for(var u=0,l=!1;u<i.length&&!l;u++)if(qt(o,i[u][0],n)){for(var c=!1,f=1;f<i[u].length&&!c;)qt(o,i[u][f],!n)&&(c=!0),f++;c||(l=!0)}return l}function qt(t,e,r){var n=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var o=0,i=e.length-1;o<e.length;i=o++){var a=e[o][0],s=e[o][1],u=e[i][0],l=e[i][1];if(t[1]*(a-u)+s*(u-t[0])+l*(t[0]-a)==0&&(a-t[0])*(u-t[0])<=0&&(s-t[1])*(l-t[1])<=0)return!r;s>t[1]!=l>t[1]&&t[0]<(u-a)*(t[1]-s)/(l-s)+a&&(n=!n)}return n}function Rt(t){for(var e=function(t){if("FeatureCollection"!==t.type)return"Feature"!==t.type?Mt([Ft(t)]):Mt([t]);return t}(t),r=At(e),n=!1,o=0;!n&&o<e.features.length;){var i,a=e.features[o].geometry,s=!1;if("Point"===a.type)r.geometry.coordinates[0]===a.coordinates[0]&&r.geometry.coordinates[1]===a.coordinates[1]&&(n=!0);else if("MultiPoint"===a.type){var u=!1;for(i=0;!u&&i<a.coordinates.length;)r.geometry.coordinates[0]===a.coordinates[i][0]&&r.geometry.coordinates[1]===a.coordinates[i][1]&&(n=!0,u=!0),i++}else if("LineString"===a.type)for(i=0;!s&&i<a.coordinates.length-1;)zt(r.geometry.coordinates[0],r.geometry.coordinates[1],a.coordinates[i][0],a.coordinates[i][1],a.coordinates[i+1][0],a.coordinates[i+1][1])&&(s=!0,n=!0),i++;else if("MultiLineString"===a.type)for(var l=0;l<a.coordinates.length;){s=!1,i=0;for(var c=a.coordinates[l];!s&&i<c.length-1;)zt(r.geometry.coordinates[0],r.geometry.coordinates[1],c[i][0],c[i][1],c[i+1][0],c[i+1][1])&&(s=!0,n=!0),i++;l++}else"Polygon"!==a.type&&"MultiPolygon"!==a.type||Bt(r,a)&&(n=!0);o++}if(n)return r;var f=Mt([]);for(o=0;o<e.features.length;o++)f.features=f.features.concat(yt(e.features[o]).features);return function(t,e,r){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!It(t[0])||!It(t[1]))throw new Error("coordinates must contain numbers");return Ft({type:"Point",coordinates:t},e,r)}(function(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var r,n=1/0;return function(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var r=0;r<t.features.length&&!1!==e(t.features[r],r);r++);}(e,(function(e,o){var i=kt(t,e);i<n&&((r=Et(e)).properties.featureIndex=o,r.properties.distanceToPoint=i,n=i)})),r}(r,f).geometry.coordinates)}function zt(t,e,r,n,o,i){return Math.sqrt((o-r)*(o-r)+(i-n)*(i-n))===Math.sqrt((t-r)*(t-r)+(e-n)*(e-n))+Math.sqrt((o-t)*(o-t)+(i-e)*(i-e))}function Gt(t,e,r){var n=r;return function(t,e){var r,n,o,i,a,s,u,l,c,f,h=0,p="FeatureCollection"===t.type,g="Feature"===t.type,d=p?t.features.length:1;for(r=0;r<d;r++){for(s=p?t.features[r].geometry:g?t.geometry:t,l=p?t.features[r].properties:g?t.properties:{},c=p?t.features[r].bbox:g?t.bbox:void 0,f=p?t.features[r].id:g?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,o=0;o<a;o++)if(null!==(i=u?s.geometries[o]:s))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(i,h,l,c,f))return!1;break;case"GeometryCollection":for(n=0;n<i.geometries.length;n++)if(!1===e(i.geometries[n],h,l,c,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,h,l,c,f))return!1;h++}}(t,(function(t,o,i,a,s){n=0===o&&void 0===r?t:e(n,t,o,i,a,s)})),n}var Ut=6378137;function Jt(t){return Gt(t,(function(t,e){return t+function(t){var e,r=0;switch(t.type){case"Polygon":return $t(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)r+=$t(t.coordinates[e]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)}),0)}function $t(t){var e=0;if(t&&t.length>0){e+=Math.abs(Wt(t[0]));for(var r=1;r<t.length;r++)e-=Math.abs(Wt(t[r]))}return e}function Wt(t){var e,r,n,o,i,a,s=0,u=t.length;if(u>2){for(a=0;a<u;a++)a===u-2?(n=u-2,o=u-1,i=0):a===u-1?(n=u-1,o=0,i=1):(n=a,o=a+1,i=a+2),e=t[n],r=t[o],s+=(Xt(t[i][0])-Xt(e[0]))*Math.sin(Xt(r[1]));s=s*Ut*Ut/2}return s}function Xt(t){return t*Math.PI/180}function Kt(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var n,o=function(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}(t),i="Feature"===(n=e).type?n.geometry:n,a=i.type,s=e.bbox,u=i.coordinates;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(o,s))return!1;"Polygon"===a&&(u=[u]);for(var l=!1,c=0;c<u.length&&!l;c++)if(Yt(o,u[c][0],r.ignoreBoundary)){for(var f=!1,h=1;h<u[c].length&&!f;)Yt(o,u[c][h],!r.ignoreBoundary)&&(f=!0),h++;f||(l=!0)}return l}function Yt(t,e,r){var n=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var o=0,i=e.length-1;o<e.length;i=o++){var a=e[o][0],s=e[o][1],u=e[i][0],l=e[i][1];if(t[1]*(a-u)+s*(u-t[0])+l*(t[0]-a)==0&&(a-t[0])*(u-t[0])<=0&&(s-t[1])*(l-t[1])<=0)return!r;s>t[1]!=l>t[1]&&t[0]<(u-a)*(t[1]-s)/(l-s)+a&&(n=!n)}return n}function Zt(t,e){void 0===e&&(e={});var r=Number(t[0]),n=Number(t[1]),o=Number(t[2]),i=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var a=[r,n];return function(t,e,r){void 0===r&&(r={});for(var n=0,o=t;n<o.length;n++){var i=o[n];if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<i[i.length-1].length;a++)if(i[i.length-1][a]!==i[0][a])throw new Error("First and last Position are not equivalent.")}return function(t,e,r){void 0===r&&(r={});var n={type:"Feature"};return(0===r.id||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=e||{},n.geometry=t,n}({type:"Polygon",coordinates:t},e,r)}([[a,[o,n],[o,i],[r,i],a]],e.properties,{bbox:t,id:e.id})}var Ht=function(){this.__data__=[],this.size=0};var Qt=function(t,e){return t===e||t!=t&&e!=e};var te=function(t,e){for(var r=t.length;r--;)if(Qt(t[r][0],e))return r;return-1},ee=Array.prototype.splice;var re=function(t){var e=this.__data__,r=te(e,t);return!(r<0)&&(r==e.length-1?e.pop():ee.call(e,r,1),--this.size,!0)};var ne=function(t){var e=this.__data__,r=te(e,t);return r<0?void 0:e[r][1]};var oe=function(t){return te(this.__data__,t)>-1};var ie=function(t,e){var r=this.__data__,n=te(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function ae(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ae.prototype.clear=Ht,ae.prototype.delete=re,ae.prototype.get=ne,ae.prototype.has=oe,ae.prototype.set=ie;var se=ae;var ue=function(){this.__data__=new se,this.size=0};var le=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r};var ce=function(t){return this.__data__.get(t)};var fe=function(t){return this.__data__.has(t)},he="object"==typeof i&&i&&i.Object===Object&&i,pe="object"==typeof self&&self&&self.Object===Object&&self,ge=he||pe||Function("return this")(),de=ge.Symbol,ye=Object.prototype,ve=ye.hasOwnProperty,be=ye.toString,me=de?de.toStringTag:void 0;var we=function(t){var e=ve.call(t,me),r=t[me];try{t[me]=void 0;var n=!0}catch(t){}var o=be.call(t);return n&&(e?t[me]=r:delete t[me]),o},je=Object.prototype.toString;var Ae=function(t){return je.call(t)},Ee=de?de.toStringTag:void 0;var xe=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Ee&&Ee in Object(t)?we(t):Ae(t)};var _e=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var Oe,Ne=function(t){if(!_e(t))return!1;var e=xe(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},Pe=ge["__core-js_shared__"],Se=(Oe=/[^.]+$/.exec(Pe&&Pe.keys&&Pe.keys.IE_PROTO||""))?"Symbol(src)_1."+Oe:"";var Ce=function(t){return!!Se&&Se in t},Te=Function.prototype.toString;var ke=function(t){if(null!=t){try{return Te.call(t)}catch(t){}try{return t+""}catch(t){}}return""},Fe=/^\[object .+?Constructor\]$/,Me=Function.prototype,Ie=Object.prototype,Ve=Me.toString,De=Ie.hasOwnProperty,Le=RegExp("^"+Ve.call(De).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Be=function(t){return!(!_e(t)||Ce(t))&&(Ne(t)?Le:Fe).test(ke(t))};var qe=function(t,e){return null==t?void 0:t[e]};var Re=function(t,e){var r=qe(t,e);return Be(r)?r:void 0},ze=Re(ge,"Map"),Ge=Re(Object,"create");var Ue=function(){this.__data__=Ge?Ge(null):{},this.size=0};var Je=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},$e=Object.prototype.hasOwnProperty;var We=function(t){var e=this.__data__;if(Ge){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return $e.call(e,t)?e[t]:void 0},Xe=Object.prototype.hasOwnProperty;var Ke=function(t){var e=this.__data__;return Ge?void 0!==e[t]:Xe.call(e,t)};var Ye=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Ge&&void 0===e?"__lodash_hash_undefined__":e,this};function Ze(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Ze.prototype.clear=Ue,Ze.prototype.delete=Je,Ze.prototype.get=We,Ze.prototype.has=Ke,Ze.prototype.set=Ye;var He=Ze;var Qe=function(){this.size=0,this.__data__={hash:new He,map:new(ze||se),string:new He}};var tr=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var er=function(t,e){var r=t.__data__;return tr(e)?r["string"==typeof e?"string":"hash"]:r.map};var rr=function(t){var e=er(this,t).delete(t);return this.size-=e?1:0,e};var nr=function(t){return er(this,t).get(t)};var or=function(t){return er(this,t).has(t)};var ir=function(t,e){var r=er(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function ar(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ar.prototype.clear=Qe,ar.prototype.delete=rr,ar.prototype.get=nr,ar.prototype.has=or,ar.prototype.set=ir;var sr=ar;var ur=function(t,e){var r=this.__data__;if(r instanceof se){var n=r.__data__;if(!ze||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new sr(n)}return r.set(t,e),this.size=r.size,this};function lr(t){var e=this.__data__=new se(t);this.size=e.size}lr.prototype.clear=ue,lr.prototype.delete=le,lr.prototype.get=ce,lr.prototype.has=fe,lr.prototype.set=ur;var cr=lr;var fr=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t},hr=function(){try{var t=Re(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var pr=function(t,e,r){"__proto__"==e&&hr?hr(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r},gr=Object.prototype.hasOwnProperty;var dr=function(t,e,r){var n=t[e];gr.call(t,e)&&Qt(n,r)&&(void 0!==r||e in t)||pr(t,e,r)};var yr=function(t,e,r,n){var o=!r;r||(r={});for(var i=-1,a=e.length;++i<a;){var s=e[i],u=n?n(r[s],t[s],s,r,t):void 0;void 0===u&&(u=t[s]),o?pr(r,s,u):dr(r,s,u)}return r};var vr=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n};var br=function(t){return null!=t&&"object"==typeof t};var mr=function(t){return br(t)&&"[object Arguments]"==xe(t)},wr=Object.prototype,jr=wr.hasOwnProperty,Ar=wr.propertyIsEnumerable,Er=mr(function(){return arguments}())?mr:function(t){return br(t)&&jr.call(t,"callee")&&!Ar.call(t,"callee")},xr=Array.isArray;var _r=function(){return!1},Or=a((function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r?ge.Buffer:void 0,i=(o?o.isBuffer:void 0)||_r;t.exports=i})),Nr=/^(?:0|[1-9]\d*)$/;var Pr=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&Nr.test(t))&&t>-1&&t%1==0&&t<e};var Sr=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},Cr={};Cr["[object Float32Array]"]=Cr["[object Float64Array]"]=Cr["[object Int8Array]"]=Cr["[object Int16Array]"]=Cr["[object Int32Array]"]=Cr["[object Uint8Array]"]=Cr["[object Uint8ClampedArray]"]=Cr["[object Uint16Array]"]=Cr["[object Uint32Array]"]=!0,Cr["[object Arguments]"]=Cr["[object Array]"]=Cr["[object ArrayBuffer]"]=Cr["[object Boolean]"]=Cr["[object DataView]"]=Cr["[object Date]"]=Cr["[object Error]"]=Cr["[object Function]"]=Cr["[object Map]"]=Cr["[object Number]"]=Cr["[object Object]"]=Cr["[object RegExp]"]=Cr["[object Set]"]=Cr["[object String]"]=Cr["[object WeakMap]"]=!1;var Tr=function(t){return br(t)&&Sr(t.length)&&!!Cr[xe(t)]};var kr=function(t){return function(e){return t(e)}},Fr=a((function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r&&he.process,i=function(){try{var t=n&&n.require&&n.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=i})),Mr=Fr&&Fr.isTypedArray,Ir=Mr?kr(Mr):Tr,Vr=Object.prototype.hasOwnProperty;var Dr=function(t,e){var r=xr(t),n=!r&&Er(t),o=!r&&!n&&Or(t),i=!r&&!n&&!o&&Ir(t),a=r||n||o||i,s=a?vr(t.length,String):[],u=s.length;for(var l in t)!e&&!Vr.call(t,l)||a&&("length"==l||o&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Pr(l,u))||s.push(l);return s},Lr=Object.prototype;var Br=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Lr)};var qr=function(t,e){return function(r){return t(e(r))}},Rr=qr(Object.keys,Object),zr=Object.prototype.hasOwnProperty;var Gr=function(t){if(!Br(t))return Rr(t);var e=[];for(var r in Object(t))zr.call(t,r)&&"constructor"!=r&&e.push(r);return e};var Ur=function(t){return null!=t&&Sr(t.length)&&!Ne(t)};var Jr=function(t){return Ur(t)?Dr(t):Gr(t)};var $r=function(t,e){return t&&yr(e,Jr(e),t)};var Wr=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e},Xr=Object.prototype.hasOwnProperty;var Kr=function(t){if(!_e(t))return Wr(t);var e=Br(t),r=[];for(var n in t)("constructor"!=n||!e&&Xr.call(t,n))&&r.push(n);return r};var Yr=function(t){return Ur(t)?Dr(t,!0):Kr(t)};var Zr=function(t,e){return t&&yr(e,Yr(e),t)},Hr=a((function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r?ge.Buffer:void 0,i=o?o.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var r=t.length,n=i?i(r):new t.constructor(r);return t.copy(n),n}}));var Qr=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e};var tn=function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var a=t[r];e(a,r,t)&&(i[o++]=a)}return i};var en=function(){return[]},rn=Object.prototype.propertyIsEnumerable,nn=Object.getOwnPropertySymbols,on=nn?function(t){return null==t?[]:(t=Object(t),tn(nn(t),(function(e){return rn.call(t,e)})))}:en;var an=function(t,e){return yr(t,on(t),e)};var sn=function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t},un=qr(Object.getPrototypeOf,Object),ln=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)sn(e,on(t)),t=un(t);return e}:en;var cn=function(t,e){return yr(t,ln(t),e)};var fn=function(t,e,r){var n=e(t);return xr(t)?n:sn(n,r(t))};var hn=function(t){return fn(t,Jr,on)};var pn=function(t){return fn(t,Yr,ln)},gn=Re(ge,"DataView"),dn=Re(ge,"Promise"),yn=Re(ge,"Set"),vn=Re(ge,"WeakMap"),bn="[object Map]",mn="[object Promise]",wn="[object Set]",jn="[object WeakMap]",An="[object DataView]",En=ke(gn),xn=ke(ze),_n=ke(dn),On=ke(yn),Nn=ke(vn),Pn=xe;(gn&&Pn(new gn(new ArrayBuffer(1)))!=An||ze&&Pn(new ze)!=bn||dn&&Pn(dn.resolve())!=mn||yn&&Pn(new yn)!=wn||vn&&Pn(new vn)!=jn)&&(Pn=function(t){var e=xe(t),r="[object Object]"==e?t.constructor:void 0,n=r?ke(r):"";if(n)switch(n){case En:return An;case xn:return bn;case _n:return mn;case On:return wn;case Nn:return jn}return e});var Sn=Pn,Cn=Object.prototype.hasOwnProperty;var Tn=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&Cn.call(t,"index")&&(r.index=t.index,r.input=t.input),r},kn=ge.Uint8Array;var Fn=function(t){var e=new t.constructor(t.byteLength);return new kn(e).set(new kn(t)),e};var Mn=function(t,e){var r=e?Fn(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)},In=/\w*$/;var Vn=function(t){var e=new t.constructor(t.source,In.exec(t));return e.lastIndex=t.lastIndex,e},Dn=de?de.prototype:void 0,Ln=Dn?Dn.valueOf:void 0;var Bn=function(t){return Ln?Object(Ln.call(t)):{}};var qn=function(t,e){var r=e?Fn(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)};var Rn=function(t,e,r){var n=t.constructor;switch(e){case"[object ArrayBuffer]":return Fn(t);case"[object Boolean]":case"[object Date]":return new n(+t);case"[object DataView]":return Mn(t,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return qn(t,r);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(t);case"[object RegExp]":return Vn(t);case"[object Set]":return new n;case"[object Symbol]":return Bn(t)}},zn=Object.create,Gn=function(){function t(){}return function(e){if(!_e(e))return{};if(zn)return zn(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();var Un=function(t){return"function"!=typeof t.constructor||Br(t)?{}:Gn(un(t))};var Jn=function(t){return br(t)&&"[object Map]"==Sn(t)},$n=Fr&&Fr.isMap,Wn=$n?kr($n):Jn;var Xn=function(t){return br(t)&&"[object Set]"==Sn(t)},Kn=Fr&&Fr.isSet,Yn=Kn?kr(Kn):Xn,Zn="[object Arguments]",Hn="[object Function]",Qn="[object Object]",to={};to[Zn]=to["[object Array]"]=to["[object ArrayBuffer]"]=to["[object DataView]"]=to["[object Boolean]"]=to["[object Date]"]=to["[object Float32Array]"]=to["[object Float64Array]"]=to["[object Int8Array]"]=to["[object Int16Array]"]=to["[object Int32Array]"]=to["[object Map]"]=to["[object Number]"]=to[Qn]=to["[object RegExp]"]=to["[object Set]"]=to["[object String]"]=to["[object Symbol]"]=to["[object Uint8Array]"]=to["[object Uint8ClampedArray]"]=to["[object Uint16Array]"]=to["[object Uint32Array]"]=!0,to["[object Error]"]=to[Hn]=to["[object WeakMap]"]=!1;var eo=function t(e,r,n,o,i,a){var s,u=1&r,l=2&r,c=4&r;if(n&&(s=i?n(e,o,i,a):n(e)),void 0!==s)return s;if(!_e(e))return e;var f=xr(e);if(f){if(s=Tn(e),!u)return Qr(e,s)}else{var h=Sn(e),p=h==Hn||"[object GeneratorFunction]"==h;if(Or(e))return Hr(e,u);if(h==Qn||h==Zn||p&&!i){if(s=l||p?{}:Un(e),!u)return l?cn(e,Zr(s,e)):an(e,$r(s,e))}else{if(!to[h])return i?e:{};s=Rn(e,h,u)}}a||(a=new cr);var g=a.get(e);if(g)return g;a.set(e,s),Yn(e)?e.forEach((function(o){s.add(t(o,r,n,o,e,a))})):Wn(e)&&e.forEach((function(o,i){s.set(i,t(o,r,n,i,e,a))}));var d=f?void 0:(c?l?pn:hn:l?Yr:Jr)(e);return fr(d||e,(function(o,i){d&&(o=e[i=o]),dr(s,i,t(o,r,n,i,e,a))})),s};var ro=function(t){return eo(t,4)};function no(t,e){return t>e?1:t<e?-1:0}class oo{constructor(t=no,e=!1){this._compare=t,this._root=null,this._size=0,this._noDuplicates=!!e}rotateLeft(t){var e=t.right;e&&(t.right=e.left,e.left&&(e.left.parent=t),e.parent=t.parent),t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.left=t),t.parent=e}rotateRight(t){var e=t.left;e&&(t.left=e.right,e.right&&(e.right.parent=t),e.parent=t.parent),t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.right=t),t.parent=e}_splay(t){for(;t.parent;){var e=t.parent;e.parent?e.left===t&&e.parent.left===e?(this.rotateRight(e.parent),this.rotateRight(e)):e.right===t&&e.parent.right===e?(this.rotateLeft(e.parent),this.rotateLeft(e)):e.left===t&&e.parent.right===e?(this.rotateRight(e),this.rotateLeft(e)):(this.rotateLeft(e),this.rotateRight(e)):e.left===t?this.rotateRight(e):this.rotateLeft(e)}}splay(t){for(var e,r,n,o,i;t.parent;)(r=(e=t.parent).parent)&&r.parent?((n=r.parent).left===r?n.left=t:n.right=t,t.parent=n):(t.parent=null,this._root=t),o=t.left,i=t.right,t===e.left?(r&&(r.left===e?(e.right?(r.left=e.right,r.left.parent=r):r.left=null,e.right=r,r.parent=e):(o?(r.right=o,o.parent=r):r.right=null,t.left=r,r.parent=t)),i?(e.left=i,i.parent=e):e.left=null,t.right=e,e.parent=t):(r&&(r.right===e?(e.left?(r.right=e.left,r.right.parent=r):r.right=null,e.left=r,r.parent=e):(i?(r.left=i,i.parent=r):r.left=null,t.right=r,r.parent=t)),o?(e.right=o,o.parent=e):e.right=null,t.left=e,e.parent=t)}replace(t,e){t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.parent=t.parent)}minNode(t=this._root){if(t)for(;t.left;)t=t.left;return t}maxNode(t=this._root){if(t)for(;t.right;)t=t.right;return t}insert(t,e){var r=this._root,n=null,o=this._compare;if(this._noDuplicates)for(;r;){if(n=r,0===o(r.key,t))return;r=o(r.key,t)<0?r.right:r.left}else for(;r;)n=r,r=o(r.key,t)<0?r.right:r.left;return r={key:t,data:e,left:null,right:null,parent:n},n?o(n.key,r.key)<0?n.right=r:n.left=r:this._root=r,this.splay(r),this._size++,r}find(t){for(var e=this._root,r=this._compare;e;){var n=r(e.key,t);if(n<0)e=e.right;else{if(!(n>0))return e;e=e.left}}return null}contains(t){for(var e=this._root,r=this._compare;e;){var n=r(t,e.key);if(0===n)return!0;e=n<0?e.left:e.right}return!1}remove(t){var e=this.find(t);if(!e)return!1;if(this.splay(e),e.left)if(e.right){var r=this.minNode(e.right);r.parent!==e&&(this.replace(r,r.right),r.right=e.right,r.right.parent=r),this.replace(e,r),r.left=e.left,r.left.parent=r}else this.replace(e,e.left);else this.replace(e,e.right);return this._size--,!0}removeNode(t){if(!t)return!1;if(this.splay(t),t.left)if(t.right){var e=this.minNode(t.right);e.parent!==t&&(this.replace(e,e.right),e.right=t.right,e.right.parent=e),this.replace(t,e),e.left=t.left,e.left.parent=e}else this.replace(t,t.left);else this.replace(t,t.right);return this._size--,!0}erase(t){var e=this.find(t);if(e){this.splay(e);var r=e.left,n=e.right,o=null;r&&(r.parent=null,o=this.maxNode(r),this.splay(o),this._root=o),n&&(r?o.right=n:this._root=n,n.parent=o),this._size--}}pop(){var t=this._root,e=null;if(t){for(;t.left;)t=t.left;e={key:t.key,data:t.data},this.remove(t.key)}return e}next(t){var e=t;if(e)if(e.right)for(e=e.right;e&&e.left;)e=e.left;else for(e=t.parent;e&&e.right===t;)t=e,e=e.parent;return e}prev(t){var e=t;if(e)if(e.left)for(e=e.left;e&&e.right;)e=e.right;else for(e=t.parent;e&&e.left===t;)t=e,e=e.parent;return e}forEach(t){for(var e=this._root,r=[],n=!1,o=0;!n;)e?(r.push(e),e=e.left):r.length>0?(t(e=r.pop(),o++),e=e.right):n=!0;return this}range(t,e,r,n){const o=[],i=this._compare;let a,s=this._root;for(;0!==o.length||s;)if(s)o.push(s),s=s.left;else{if(s=o.pop(),a=i(s.key,e),a>0)break;if(i(s.key,t)>=0&&r.call(n,s))return this;s=s.right}return this}keys(){for(var t=this._root,e=[],r=[],n=!1;!n;)t?(e.push(t),t=t.left):e.length>0?(t=e.pop(),r.push(t.key),t=t.right):n=!0;return r}values(){for(var t=this._root,e=[],r=[],n=!1;!n;)t?(e.push(t),t=t.left):e.length>0?(t=e.pop(),r.push(t.data),t=t.right):n=!0;return r}at(t){for(var e=this._root,r=[],n=!1,o=0;!n;)if(e)r.push(e),e=e.left;else if(r.length>0){if(e=r.pop(),o===t)return e;o++,e=e.right}else n=!0;return null}load(t=[],e=[],r=!1){if(0!==this._size)throw new Error("bulk-load: tree is not empty");const n=t.length;return r&&ao(t,e,0,n-1,this._compare),this._root=io(null,t,e,0,n),this._size=n,this}min(){var t=this.minNode(this._root);return t?t.key:null}max(){var t=this.maxNode(this._root);return t?t.key:null}isEmpty(){return null===this._root}get size(){return this._size}static createTree(t,e,r,n,o){return new oo(r,o).load(t,e,n)}}function io(t,e,r,n,o){const i=o-n;if(i>0){const a=n+Math.floor(i/2),s={key:e[a],data:r[a],parent:t};return s.left=io(s,e,r,n,a),s.right=io(s,e,r,a+1,o),s}return null}function ao(t,e,r,n,o){if(r>=n)return;const i=t[r+n>>1];let a=r-1,s=n+1;for(;;){do{a++}while(o(t[a],i)<0);do{s--}while(o(t[s],i)>0);if(a>=s)break;let r=t[a];t[a]=t[s],t[s]=r,r=e[a],e[a]=e[s],e[s]=r}ao(t,e,r,s,o),ao(t,e,s+1,n,o)}function so(t,e,r){null===e?(t.inOut=!1,t.otherInOut=!0):(t.isSubject===e.isSubject?(t.inOut=!e.inOut,t.otherInOut=e.otherInOut):(t.inOut=!e.otherInOut,t.otherInOut=e.isVertical()?!e.inOut:e.inOut),e&&(t.prevInResult=!uo(e,r)||e.isVertical()?e.prevInResult:e)),t.inResult=uo(t,r)}function uo(t,e){switch(t.type){case 0:switch(e){case 0:return!t.otherInOut;case 1:return t.otherInOut;case 2:return t.isSubject&&t.otherInOut||!t.isSubject&&!t.otherInOut;case 3:return!0}break;case 2:return 0===e||1===e;case 3:return 2===e;case 1:return!1}return!1}class lo{constructor(t,e,r,n,o){this.left=e,this.point=t,this.otherEvent=r,this.isSubject=n,this.type=o||0,this.inOut=!1,this.otherInOut=!1,this.prevInResult=null,this.inResult=!1,this.resultInOut=!1,this.isExteriorRing=!0}isBelow(t){const e=this.point,r=this.otherEvent.point;return this.left?(e[0]-t[0])*(r[1]-t[1])-(r[0]-t[0])*(e[1]-t[1])>0:(r[0]-t[0])*(e[1]-t[1])-(e[0]-t[0])*(r[1]-t[1])>0}isAbove(t){return!this.isBelow(t)}isVertical(){return this.point[0]===this.otherEvent.point[0]}clone(){const t=new lo(this.point,this.left,this.otherEvent,this.isSubject,this.type);return t.inResult=this.inResult,t.prevInResult=this.prevInResult,t.isExteriorRing=this.isExteriorRing,t.inOut=this.inOut,t.otherInOut=this.otherInOut,t}}function co(t,e){return t[0]===e[0]&&t[1]===e[1]}function fo(t,e,r){return(t[0]-r[0])*(e[1]-r[1])-(e[0]-r[0])*(t[1]-r[1])}function ho(t,e){const r=t.point,n=e.point;return r[0]>n[0]?1:r[0]<n[0]?-1:r[1]!==n[1]?r[1]>n[1]?1:-1:function(t,e,r,n){if(t.left!==e.left)return t.left?1:-1;if(0!==fo(r,t.otherEvent.point,e.otherEvent.point))return t.isBelow(e.otherEvent.point)?-1:1;return!t.isSubject&&e.isSubject?1:-1}(t,e,r)}function po(t,e,r){const n=new lo(e,!1,t,t.isSubject),o=new lo(e,!0,t.otherEvent,t.isSubject);return co(t.point,t.otherEvent.point)&&console.warn("what is that, a collapsed segment?",t),n.contourId=o.contourId=t.contourId,ho(o,t.otherEvent)>0&&(t.otherEvent.left=!0,o.left=!1),t.otherEvent.otherEvent=o,t.otherEvent=n,r.push(o),r.push(n),r}function go(t,e){return t[0]*e[1]-t[1]*e[0]}function yo(t,e){return t[0]*e[0]+t[1]*e[1]}function vo(t,e,r){const n=function(t,e,r,n,o){const i=[e[0]-t[0],e[1]-t[1]],a=[n[0]-r[0],n[1]-r[1]];function s(t,e,r){return[t[0]+e*r[0],t[1]+e*r[1]]}const u=[r[0]-t[0],r[1]-t[1]];let l=go(i,a),c=l*l;const f=yo(i,i);if(c>0){const e=go(u,a)/l;if(e<0||e>1)return null;const n=go(u,i)/l;return n<0||n>1?null:0===e||1===e?o?null:[s(t,e,i)]:0===n||1===n?o?null:[s(r,n,a)]:[s(t,e,i)]}if(l=go(u,i),c=l*l,c>0)return null;const h=yo(i,u)/f,p=h+yo(i,a)/f,g=Math.min(h,p),d=Math.max(h,p);return g<=1&&d>=0?1===g?o?null:[s(t,g>0?g:0,i)]:0===d?o?null:[s(t,d<1?d:1,i)]:o&&0===g&&1===d?null:[s(t,g>0?g:0,i),s(t,d<1?d:1,i)]:null}(t.point,t.otherEvent.point,e.point,e.otherEvent.point),o=n?n.length:0;if(0===o)return 0;if(1===o&&(co(t.point,e.point)||co(t.otherEvent.point,e.otherEvent.point)))return 0;if(2===o&&t.isSubject===e.isSubject)return 0;if(1===o)return co(t.point,n[0])||co(t.otherEvent.point,n[0])||po(t,n[0],r),co(e.point,n[0])||co(e.otherEvent.point,n[0])||po(e,n[0],r),1;const i=[];let a=!1,s=!1;return co(t.point,e.point)?a=!0:1===ho(t,e)?i.push(e,t):i.push(t,e),co(t.otherEvent.point,e.otherEvent.point)?s=!0:1===ho(t.otherEvent,e.otherEvent)?i.push(e.otherEvent,t.otherEvent):i.push(t.otherEvent,e.otherEvent),a&&s||a?(e.type=1,t.type=e.inOut===t.inOut?2:3,a&&!s&&po(i[1].otherEvent,i[0].point,r),2):s?(po(i[0],i[1].point,r),3):i[0]!==i[3].otherEvent?(po(i[0],i[1].point,r),po(i[1],i[2].point,r),3):(po(i[0],i[1].point,r),po(i[3].otherEvent,i[2].point,r),3)}function bo(t,e){if(t===e)return 0;if(0!==fo(t.point,t.otherEvent.point,e.point)||0!==fo(t.point,t.otherEvent.point,e.otherEvent.point))return co(t.point,e.point)?t.isBelow(e.otherEvent.point)?-1:1:t.point[0]===e.point[0]?t.point[1]<e.point[1]?-1:1:1===ho(t,e)?e.isAbove(t.point)?-1:1:t.isBelow(e.point)?-1:1;if(t.isSubject!==e.isSubject)return t.isSubject?-1:1;{let r=t.point,n=e.point;if(r[0]===n[0]&&r[1]===n[1])return r=t.otherEvent.point,n=e.otherEvent.point,r[0]===n[0]&&r[1]===n[1]?0:t.contourId>e.contourId?1:-1}return 1===ho(t,e)?1:-1}function mo(t,e,r,n){let o,i,a=t+1;const s=e.length;for(o=e[t].point,a<s&&(i=e[a].point);a<s&&i[0]===o[0]&&i[1]===o[1];){if(!r[a])return a;a++,i=e[a].point}for(a=t-1;r[a]&&a>=n;)a--;return a}function wo(t,e){let r,n;const o=function(t){let e,r,n,o;const i=[];for(r=0,n=t.length;r<n;r++)e=t[r],(e.left&&e.inResult||!e.left&&e.otherEvent.inResult)&&i.push(e);let a=!1;for(;!a;)for(a=!0,r=0,n=i.length;r<n;r++)r+1<n&&1===ho(i[r],i[r+1])&&(o=i[r],i[r]=i[r+1],i[r+1]=o,a=!1);for(r=0,n=i.length;r<n;r++)e=i[r],e.pos=r;for(r=0,n=i.length;r<n;r++)e=i[r],e.left||(o=e.pos,e.pos=e.otherEvent.pos,e.otherEvent.pos=o);return i}(t),i={},a=[];let s;for(r=0,n=o.length;r<n;r++){if(i[r])continue;const t=[[]];o[r].isExteriorRing?2===e&&!o[r].isSubject&&a.length>1?a[a.length-1].push(t[0]):a.push(t):2!==e||o[r].isSubject||0!==a.length?0===a.length?a.push([[t]]):a[a.length-1].push(t[0]):a.push(t);const n=a.length-1;let u=r;const l=o[r].point;for(t[0].push(l);u>=r;)s=o[u],i[u]=!0,s.left?(s.resultInOut=!1,s.contourId=n):(s.otherEvent.resultInOut=!0,s.otherEvent.contourId=n),u=s.pos,i[u]=!0,t[0].push(o[u].point),u=mo(u,o,i,r);u=-1===u?r:u,s=o[u],i[u]=i[s.pos]=!0,s.otherEvent.resultInOut=!0,s.otherEvent.contourId=n}return a}var jo=Eo,Ao=Eo;function Eo(t,e){if(!(this instanceof Eo))return new Eo(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||xo,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)}function xo(t,e){return t<e?-1:t>e?1:0}Eo.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,r=this.compare,n=e[t];t>0;){var o=t-1>>1,i=e[o];if(r(n,i)>=0)break;e[t]=i,t=o}e[t]=n},_down:function(t){for(var e=this.data,r=this.compare,n=this.length>>1,o=e[t];t<n;){var i=1+(t<<1),a=i+1,s=e[i];if(a<this.length&&r(e[a],s)<0&&(i=a,s=e[a]),r(s,o)>=0)break;e[t]=s,t=i}e[t]=o}},jo.default=Ao;const _o=Math.max,Oo=Math.min;let No=0;function Po(t,e,r,n,o,i){let a,s,u,l,c,f;for(a=0,s=t.length-1;a<s;a++){if(u=t[a],l=t[a+1],c=new lo(u,!1,void 0,e),f=new lo(l,!1,c,e),c.otherEvent=f,u[0]===l[0]&&u[1]===l[1])continue;c.contourId=f.contourId=r,i||(c.isExteriorRing=!1,f.isExteriorRing=!1),ho(c,f)>0?f.left=!0:c.left=!0;const s=u[0],h=u[1];o[0]=Oo(o[0],s),o[1]=Oo(o[1],h),o[2]=_o(o[2],s),o[3]=_o(o[3],h),n.push(c),n.push(f)}}const So=[];function Co(t,e,r){"number"==typeof t[0][0][0]&&(t=[t]),"number"==typeof e[0][0][0]&&(e=[e]);let n=function(t,e,r){let n=null;return t.length*e.length==0&&(0===r?n=So:2===r?n=t:1!==r&&3!==r||(n=0===t.length?e:t)),n}(t,e,r);if(n)return n===So?null:n;const o=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],a=function(t,e,r,n,o){const i=new jo(null,ho);let a,s,u,l,c,f;for(u=0,l=t.length;u<l;u++)for(a=t[u],c=0,f=a.length;c<f;c++)s=0===c,s&&No++,Po(a[c],!0,No,i,r,s);for(u=0,l=e.length;u<l;u++)for(a=e[u],c=0,f=a.length;c<f;c++)s=0===c,2===o&&(s=!1),s&&No++,Po(a[c],!1,No,i,n,s);return i}(t,e,o,i,r);if(n=function(t,e,r,n,o){let i=null;return(r[0]>n[2]||n[0]>r[2]||r[1]>n[3]||n[1]>r[3])&&(0===o?i=So:2===o?i=t:1!==o&&3!==o||(i=t.concat(e))),i}(t,e,o,i,r),n)return n===So?null:n;return wo(function(t,e,r,n,o,i){const a=new oo(bo),s=[],u=Math.min(n[2],o[2]);let l,c,f;for(;0!==t.length;){let e=t.pop();if(s.push(e),0===i&&e.point[0]>u||2===i&&e.point[0]>n[2])break;if(e.left){c=l=a.insert(e),f=a.minNode(),l=l!==f?a.prev(l):null,c=a.next(c);const r=l?l.key:null;let n;if(so(e,r,i),c&&2===vo(e,c.key,t)&&(so(e,r,i),so(e,c.key,i)),l&&2===vo(l.key,e,t)){let t=l;t=t!==f?a.prev(t):null,n=t?t.key:null,so(r,n,i),so(e,r,i)}}else e=e.otherEvent,c=l=a.find(e),l&&c&&(l=l!==f?a.prev(l):null,c=a.next(c),a.remove(e),c&&l&&vo(l.key,c.key,t))}return s}(a,0,0,o,i,r),r)}var To=function(t,e){for(var r=t[0],n=t[1],o=!1,i=0,a=e.length-1;i<e.length;a=i++){var s=e[i][0],u=e[i][1],l=e[a][0],c=e[a][1];u>n!=c>n&&r<(l-s)*(n-u)/(c-u)+s&&(o=!o)}return o},ko=function(t){if("Point"!==t.geometry.type){switch(t.properties.way_geometry=ro(t.geometry),t.geometry.type){case"Polygon":t.properties.mesure=Jt(t.geometry);break;case"LineString":"function"==typeof length&&(t.properties.mesure=length(t))}t.geometry=Rt(t.geometry).geometry}},Fo=function(t){if("no"===t.area)return!1;var e=Object.keys(t);return!(!e.includes("building")||"no"===t.building)||(!(!e.includes("landuse")||"no"===t.landuse)||(!(!e.includes("amenity")||"no"===t.amenity)||(!(!e.includes("leisure")||"no"===t.leisure)||(!(!e.includes("area")||"no"===t.area)||(!(!e.includes("place")||"no"===t.place)||(!(!e.includes("shop")||"no"===t.shop)||(!(!e.includes("boundary")||"no"===t.boundary)||(!(!e.includes("tourism")||"no"===t.tourism)||(!(!e.includes("historic")||"no"===t.historic)||(!(!e.includes("public_transport")||"no"===t.public_transport)||(!(!e.includes("office")||"no"===t.office)||(!(!e.includes("building:part")||"no"===t["building:part"])||(!(!e.includes("military")||"no"===t.military)||(!(!e.includes("ruins")||"no"===t.ruins)||(!(!e.includes("craft")||"no"===t.craft)||(!(!e.includes("golf")||"no"===t.golf)||(!(!e.includes("indoor")||"no"===t.indoor)||(!(!e.includes("highway")||!["services","rest_area","escape","elevator"].includes(t.highway))||(!(!e.includes("waterway")||!["riverbank","dock","boatyard","dam"].includes(t.waterway))||(!(!e.includes("barrier")||!["city_wall","ditch","hedge","retaining_wall","wall","spikes"].includes(t.barrier))||(!(!e.includes("railway")||!["station","turntable","roundhouse","platform"].includes(t.railway))||(!(!e.includes("power")||!["plant","substation","generator","transformer"].includes(t.power))||(!(!e.includes("natural")||["coastline","cliff","ridge","arete","tree_row"].includes(t.natural))||(!(!e.includes("man_made")||["cutline","embankment","pipeline"].includes(t.man_made))||!(!e.includes("aeroway")||["taxiway"].includes(t.aeroway))))))))))))))))))))))))))},Mo=function(t,e){if(!e)return!0;if(!t)return!1;for(var r=0,n=Object.keys(t);r<n.length;r++){var o=n[r];if(e.includes(o))return!0}return!1},Io=function(t,e){var r=t.properties.tags;for(var n in r)if(e.includes(n))return{k:n,v:r[n]};return null};function Vo(t,e){var r,n=t.properties.tags,i={conf:void 0,matchProps:0},a=o(e);try{for(a.s();!(r=a.n()).done;){var s=r.value,u=Object.keys(s.tags)[0],l=0;for(var c in s.tags)n[c]&&n[c]===s.tags[c]&&n[u]?l++:l=0;l>i.matchProps&&(i={conf:s,matchProps:l})}}catch(t){a.e(t)}finally{a.f()}if(i.conf)return i.conf;var f=t.properties.primaryTag.k?"k":"key",h=t.properties.primaryTag.k?"v":"value",p="".concat(t.properties.primaryTag[f],"/").concat(t.properties.primaryTag[h]),g={key:t.properties.primaryTag[f],icon:"wiki-question",markerColor:"#000000",lbl:{en:"".concat(t.properties.primaryTag[f]," = ").concat(t.properties.primaryTag[h])},presets:[],geometry:[],tags:{},id:p,unknowTags:!0};return g.tags[t.properties.primaryTag[f]]=t.properties.primaryTag[h],g}function Do(t){t.properties.tags.name?t.properties._name=t.properties.tags.name:t.properties.tags.ref&&(t.properties._name=t.properties.tags.ref),t.properties.meta.timestamp&&(t.properties.time=new Date(t.properties.meta.timestamp).getTime()),t.properties.tags.fixme&&(t.properties.fixme=!0)}function Lo(t,e){var r,n=Vo(t,e);return r="node"===t.properties.type?"circle":"LineString"===t.properties.way_geometry.type||"MultiLineString"===t.properties.way_geometry.type?"penta":"Polygon"===t.properties.way_geometry.type||"MultiPolygon"===t.properties.way_geometry.type?"square":"star",t.properties.icon=n.icon?n.icon:"",t.properties.marker="".concat(r,"-").concat(n.markerColor,"-").concat(t.properties.icon),t.properties.hexColor=n.markerColor,t.properties.configId=n.id,n.unknowTags&&(t.properties.unknowTags=!0),n.deprecated?t.properties.deprecated=n.deprecated:t.properties.deprecated&&delete t.properties.deprecated,Do(t),t}var Bo=function(t,e){if(!e)return t;for(var r=[],n=0;n<e.features.length;n++)r.push(e.features[n].id);for(var o=t.features.length-1;o>=0;o--)r.includes(t.features[o].id)&&t.features.splice(o,1);return ro(t)},qo=function(t,e){return e&&0!==e.length?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"MultiPolygon",coordinates:Co(e.geometry.coordinates,t.geometry.coordinates,1)}}]}:{type:"FeatureCollection",features:[t]}};function Ro(t){return t.replace(/&amp;/g,"&").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">")}return t.addAttributesToFeature=Do,t.convert=function(t,r){var n=null;r&&r.primaryKeys&&(n=r.primaryKeys);var i=lt.parse(t,{attributeNamePrefix:"",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!1,ignoreNameSpace:!1,allowBooleanAttributes:!0,parseNodeValue:!1,parseAttributeValue:!1,trimValues:!1,cdataTagName:!1,cdataPositionChar:"\\c",attrValueProcessor:function(t){return Ro(t)},tagValueProcessor:function(t){return Ro(t)}}).osm,a={minlat:Number(i.bounds.minlat),minlon:Number(i.bounds.minlon),maxlat:Number(i.bounds.maxlat),maxlon:Number(i.bounds.maxlon)},s=[a.minlon,a.minlat,a.maxlon,a.maxlat],u=function(t){Array.isArray(t)||(t=[t]);for(var e={},r=0;r<t.length;r++)e[t[r].k]=t[r].v;return e},l=function(t,e){for(var r=t[0]==t[t.length-1]?"Polygon":"LineString",n=[],o=0;o<t.length;o++){var i="node/".concat(t[o]);e[i]&&n.push(e[i].geometry.coordinates)}return"LineString"==r?{type:"LineString",coordinates:n}:"Polygon"==r?{type:"Polygon",coordinates:[n]}:void 0},c=function(t,e,r){var n=ro(t),i=Array.isArray(n.member)?n.member:[n.member];n.tainted=!1;for(var a=0;a<i.length;a++){var s=i[a],u="way/".concat(s.ref);if(e[u]){var l=e[u].geometry,c=void 0;"LineString"===l.type?(s.typeGeom="LineString",c=ro(l.coordinates)):"Polygon"===l.type&&(s.typeGeom="Polygon",c=ro(l.coordinates[0])),s.ring=c}else s.ring=null,n.tainted=!0}if(n.tainted)return null;Array.isArray(i)||(i=[i]);var h=i.filter((function(t){return"outer"===t.role&&"Polygon"===t.typeGeom&&t.ring})),p=i.filter((function(t){return"inner"===t.role&&"Polygon"===t.typeGeom&&t.ring})),g=i.filter((function(t){return"outer"===t.role&&"LineString"===t.typeGeom&&t.ring})),d=i.filter((function(t){return"inner"===t.role&&"LineString"===t.typeGeom&&t.ring}));if(0===h.length&&0===g.length)return null;if(g.length>0){var y,v=o(f(g.map((function(t){return t.ring}))));try{for(v.s();!(y=v.n()).done;){var b=y.value;h.push({type:"way",ref:"",role:"outer",typeGeom:"Polygon",ring:b})}}catch(t){v.e(t)}finally{v.f()}}if(d.length>0){var m,w=o(f(d.map((function(t){return t.ring}))));try{for(w.s();!(m=w.n()).done;){var j=m.value;p.push({type:"way",ref:"",role:"inner",typeGeom:"Polygon",ring:j})}}catch(t){w.e(t)}finally{w.f()}}if(1==h.length){var A,E=[h[0].ring],x=o(p);try{for(x.s();!(A=x.n()).done;){var _=A.value;E.push(_.ring)}}catch(t){x.e(t)}finally{x.f()}return{type:"Polygon",coordinates:E}}var O,N=h.map((function(t){return[t.ring]})),P=o(p);try{for(P.s();!(O=P.n()).done;)for(var S=O.value,C=0;C<N.length;C++){var T=N[C][0],k=S.ring[0];To(k,T)&&N[C].push(S.ring)}}catch(t){P.e(t)}finally{P.f()}return{type:"MultiPolygon",coordinates:N}},f=function(t){var r=[],n=t[0].slice();t.splice(0,1);for(var o=n[0].toString(),i=n[n.length-1].toString(),a=0;0!=t.length&&a<t.length;)t[a][0].toString()==i?(t[a].splice(0,1),n=[].concat(e(n),e(t[a])),t.splice(a,1),o=n[0].toString(),i=n[n.length-1].toString(),a=0):t[a][t[a].length-1].toString()==o?(t[a].splice(t[a].length-1,1),n=[].concat(e(t[a]),e(n)),t.splice(a,1),o=n[0].toString(),i=n[n.length-1].toString(),a=0):t[a][0].toString()==o?(t[a].splice(0,1),n=[].concat(e(t[a].reverse()),e(n)),t.splice(a,1),o=n[0].toString(),i=n[n.length-1].toString(),a=0):t[a][t[a].length-1].toString()==i?(t[a].splice(t[a].length-1,1),n=[].concat(e(n),e(t[a].reverse())),t.splice(a,1),o=n[0].toString(),i=n[n.length-1].toString(),a=0):a++,o==i&&(r.push(n),t.length>0&&(n=t[0].slice(),t.splice(0,1),o=n[0].toString(),i=n[n.length-1].toString(),a=0));return r},h={};Array.isArray(i.node)||(i.node=i.node?[i.node]:[]);var p,g=o(i.node);try{for(g.s();!(p=g.n()).done;){var d=p.value,y="node/".concat(d.id),v={type:"Feature",id:"node/".concat(d.id),properties:{type:"node",id:d.id,meta:{timestamp:d.timestamp,version:d.version,changeset:d.changeset,user:d.user,uid:d.uid}},geometry:{type:"Point",coordinates:[Number(d.lon),Number(d.lat)]}};d.tag&&(v.properties.tags=u(d.tag)),h[y]=v}}catch(t){g.e(t)}finally{g.f()}Array.isArray(i.way)||(i.way=i.way?[i.way]:[]);var b,m={},w=o(i.way);try{for(w.s();!(b=w.n()).done;){var j=b.value,A="way/".concat(j.id),E={type:"Feature",id:"way/".concat(j.id),properties:{type:"way",id:j.id,meta:{timestamp:j.timestamp,version:j.version,changeset:j.changeset,user:j.user,uid:j.uid}}};if(j.tag&&(E.properties.tags=u(j.tag)),j.nd){var x,_=[],O=o(j.nd);try{for(O.s();!(x=O.n()).done;){var N=x.value.ref;_.push(N);var P=h["node/".concat(N)];P&&(P.properties.usedByWays||(P.properties.usedByWays=[]),P.properties.usedByWays.push("way/".concat(j.id)))}}catch(t){O.e(t)}finally{O.f()}E.ndRefs=_,E.geometry=l(_,h)}m[A]=E}}catch(t){w.e(t)}finally{w.f()}var S={};Array.isArray(i.relation)||(i.relation=i.relation?[i.relation]:[]);var C,T=o(i.relation);try{for(T.s();!(C=T.n()).done;){var k=C.value,F="".concat(k.id),M={type:"Feature",id:"".concat(k.id),properties:{type:"relation",id:k.id,meta:{timestamp:k.timestamp,version:k.version,changeset:k.changeset,user:k.user,uid:k.uid}},member:k.member,tainted:!1};k.tag&&(M.properties.tags=u(k.tag)),Array.isArray(k.member)||(k.member=[k.member]);var I,V=o(k.member);try{for(V.s();!(I=V.n()).done;){var D=I.value,L="".concat(D.type,"/").concat(D.ref),B="node"==D.type?h:m;B[L]?(B[L].properties.relations||(B[L].properties.relations=[]),B[L].properties.relations.push({rel:M.id,reltags:M.properties.tags,role:D.role})):M.tainted=!0}}catch(t){V.e(t)}finally{V.f()}S[F]=M}}catch(t){T.e(t)}finally{T.f()}for(var q in S){var R=S[q];if("multipolygon"===R.properties.tags.type){var z=c(R,m);z&&(R.geometry=z)}}var G={type:"FeatureCollection",features:function(t,e,o,i,a){var s=[];for(var u in t)if(t[u].properties.tags,t[u].geometry&&t[u].properties.tags)if(Do(t[u]),r&&i){var l=Io(t[u],a);l&&(t[u].properties.primaryTag=l,Lo(t[u],r.tagConfig),s.push(t[u]))}else s.push(t[u]);for(var c in e)if(e[c].properties.tags,e[c].geometry&&e[c].properties.tags)if(Do(e[c]),"Polygon"!=e[c].geometry.type&&"MultiPolygon"!=e[c].geometry.type||Fo(e[c].properties.tags)||(e[c].geometry.coordinates=e[c].geometry.coordinates[0],e[c].geometry.type="Polygon"==e[c].geometry.type?"LineString":"MultiLineString"),ko(e[c]),r&&r.tagConfig){var f=Io(e[c],a);f&&(e[c].properties.primaryTag=f,Lo(e[c],r.tagConfig),s.push(e[c]))}else s.push(e[c]);for(var h in o){var p=o[h].properties.tags;if(o[h].geometry&&o[h].properties.tags&&Mo(p,n))if(Do(o[h]),"Polygon"!=o[h].geometry.type&&"MultiPolygon"!=o[h].geometry.type||Fo(o[h].properties.tags)||(o[h].geometry.coordinates=o[h].geometry.coordinates[0],o[h].geometry.type="Polygon"==o[h].geometry.type?"LineString":"MultiLineString"),ko(o[h]),r&&r.tagConfig){var g=Io(o[h],a);g&&(o[h].properties.primaryTag=g,Lo(o[h],r.tagConfig),s.push(o[h]))}else s.push(o[h])}return s}(h,m,S,r.tagConfig,r.primaryKeys)};if(r&&r.oldGeojson&&r.geojsonChanged){var U=Number.isInteger(r.limitFeatures)?r.limitFeatures:9999,J=Zt(s);return r.oldGeojson.features.length>U?{geojson:Bo(G,r.geojsonChanged),geojsonBbox:qo(J,null)}:{geojson:function(t,e,r,n){var o=t.features,i=e.features;if(!o||0==o.length)return e;for(var a=[],s=0;s<o.length;s++)Kt(o[s],r)&&a.push(o[s].id);for(var u=0;u<i.length;u++)for(var l=i[u].id,c=0;c<o.length;c++){if(l==o[c].id){o[c]=i[u],a.splice(a.indexOf(l),1);break}c==o.length-1&&o.push(i[u])}for(var f=0;f<a.length;f++)for(var h=a[f],p=0;p<o.length;p++)if(o[p].id==h){o.splice(p,1);break}return Bo(t,n)}(r.oldGeojson,G,J,r.geojsonChanged),geojsonBbox:qo(J,r.oldBboxFeature)}}return{geojson:G,geojsonBbox:null}},t.getConfigTag=Vo,t.setIconStyle=Lo,Object.defineProperty(t,"__esModule",{value:!0}),t}({});
