"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t,e){return t(e={exports:{}},e.exports),e.exports}var r=e((function(t,e){const r=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n="["+r+"][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",o=new RegExp("^"+n+"$");e.isExist=function(t){return void 0!==t},e.isEmptyObject=function(t){return 0===Object.keys(t).length},e.merge=function(t,e,r){if(e){const n=Object.keys(e),o=n.length;for(let i=0;i<o;i++)t[n[i]]="strict"===r?[e[n[i]]]:e[n[i]]}},e.getValue=function(t){return e.isExist(t)?t:""},e.buildOptions=function(t,e,r){let n={};if(!t)return e;for(let o=0;o<r.length;o++)void 0!==t[r[o]]?n[r[o]]=t[r[o]]:n[r[o]]=e[r[o]];return n},e.isTagNameInArrayMode=function(t,e,r){return!1!==e&&(e instanceof RegExp?e.test(t):"function"==typeof e?!!e(t,r):"strict"===e)},e.isName=function(t){const e=o.exec(t);return!(null==e)},e.getAllMatches=function(t,e){const r=[];let n=e.exec(t);for(;n;){const o=[];o.startIndex=e.lastIndex-n[0].length;const i=n.length;for(let t=0;t<i;t++)o.push(n[t]);r.push(o),n=e.exec(t)}return r},e.nameRegexp=n}));r.isExist,r.isEmptyObject,r.merge,r.getValue,r.buildOptions,r.isTagNameInArrayMode,r.isName,r.getAllMatches,r.nameRegexp;const n=function(t,e,o){const i={};if(!e.alwaysCreateTextNode&&(!t.child||r.isEmptyObject(t.child))&&(!t.attrsMap||r.isEmptyObject(t.attrsMap)))return r.isExist(t.val)?t.val:"";if(r.isExist(t.val)&&("string"!=typeof t.val||""!==t.val&&t.val!==e.cdataPositionChar)){const n=r.isTagNameInArrayMode(t.tagname,e.arrayMode,o);i[e.textNodeName]=n?[t.val]:t.val}r.merge(i,t.attrsMap,e.arrayMode);const a=Object.keys(t.child);for(let s=0;s<a.length;s++){const u=a[s];if(t.child[u]&&t.child[u].length>1){i[u]=[];for(let r in t.child[u])t.child[u].hasOwnProperty(r)&&i[u].push(n(t.child[u][r],e,u))}else{const a=n(t.child[u][0],e,u),s=!0===e.arrayMode&&"object"==typeof a||r.isTagNameInArrayMode(u,e.arrayMode,o);i[u]=s?[a]:a}}return i};var o={convertToJson:n},i=function(t,e,r){this.tagname=t,this.parent=e,this.child={},this.attrsMap={},this.val=r,this.addChild=function(t){Array.isArray(this.child[t.tagname])?this.child[t.tagname].push(t):this.child[t.tagname]=[t]}};const a=/^[-+]?0x[a-fA-F0-9]+$/,s=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const u={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};var l=function(t,e={}){if(e=Object.assign({},u,e),!t||"string"!=typeof t)return t;let r=t.trim();if(void 0!==e.skipLike&&e.skipLike.test(r))return t;if(e.hex&&a.test(r))return Number.parseInt(r,16);{const n=s.exec(r);if(n){const o=n[1],i=n[2];let a=function(t){if(t&&-1!==t.indexOf("."))return"."===(t=t.replace(/0+$/,""))?t="0":"."===t[0]?t="0"+t:"."===t[t.length-1]&&(t=t.substr(0,t.length-1)),t;return t}(n[3]);const s=n[4]||n[6];if(!e.leadingZeros&&i.length>0&&o&&"."!==r[2])return t;if(!e.leadingZeros&&i.length>0&&!o&&"."!==r[1])return t;{const n=Number(r),u=""+n;return-1!==u.search(/[eE]/)||s?e.eNotation?n:t:-1!==r.indexOf(".")?"0"===u&&""===a||u===a||o&&u==="-"+a?n:t:i?a===u||o+a===u?n:t:r===u||r===o+u?n:t}}return t}};const c=r.buildOptions;"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,r.nameRegexp),!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const f={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",numParseOptions:{hex:!0,leadingZeros:!0},tagValueProcessor:function(t,e){return t},attrValueProcessor:function(t,e){return t},stopNodes:[],alwaysCreateTextNode:!1};var p=f;const h=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","numParseOptions","stopNodes","alwaysCreateTextNode"];var g=h;function d(t,e,r){return e&&(r.trimValues&&(e=e.trim()),e=b(e=r.tagValueProcessor(e,t),r.parseNodeValue,r.numParseOptions)),e}function y(t,e){if(e.ignoreNameSpace){const e=t.split(":"),r="/"===t.charAt(0)?"/":"";if("xmlns"===e[0])return"";2===e.length&&(t=r+e[1])}return t}function b(t,e,n){if(e&&"string"==typeof t){const e=t.trim();return"true"===e||"false"!==e&&l(t,n)}return r.isExist(t)?t:""}const m=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g");function v(t,e){if(!e.ignoreAttributes&&"string"==typeof t){t=t.replace(/\r?\n/g," ");const n=r.getAllMatches(t,m),o=n.length,i={};for(let t=0;t<o;t++){const r=y(n[t][1],e);r.length&&(void 0!==n[t][4]?(e.trimValues&&(n[t][4]=n[t][4].trim()),n[t][4]=e.attrValueProcessor(n[t][4],r),i[e.attributeNamePrefix+r]=b(n[t][4],e.parseAttributeValue,e.numParseOptions)):e.allowBooleanAttributes&&(i[e.attributeNamePrefix+r]=!0))}if(!Object.keys(i).length)return;if(e.attrNodeName){const t={};return t[e.attrNodeName]=i,t}return i}}function w(t,e){let r,n="";for(let o=e;o<t.length;o++){let e=t[o];if(r)e===r&&(r="");else if('"'===e||"'"===e)r=e;else{if(">"===e)return{data:n,index:o};"\t"===e&&(e=" ")}n+=e}}function j(t,e,r,n){const o=t.indexOf(e,r);if(-1===o)throw new Error(n);return o+e.length-1}var A={defaultOptions:p,props:g,getTraversalObj:function(t,e){t=t.replace(/\r\n?/g,"\n"),e=c(e,f,h);const n=new i("!xml");let o=n,a="";for(let n=0;n<t.length;n++){if("<"===t[n])if("/"===t[n+1]){const i=j(t,">",n,"Closing Tag is not closed.");let s=t.substring(n+2,i).trim();if(e.ignoreNameSpace){const t=s.indexOf(":");-1!==t&&(s=s.substr(t+1))}o&&(o.val?o.val=r.getValue(o.val)+""+d(s,a,e):o.val=d(s,a,e)),e.stopNodes.length&&e.stopNodes.includes(o.tagname)&&(o.child=[],null==o.attrsMap&&(o.attrsMap={}),o.val=t.substr(o.startIndex+1,n-o.startIndex-1)),o=o.parent,a="",n=i}else if("?"===t[n+1])n=j(t,"?>",n,"Pi Tag is not closed.");else if("!--"===t.substr(n+1,3))n=j(t,"--\x3e",n,"Comment is not closed.");else if("!D"===t.substr(n+1,2)){const e=j(t,">",n,"DOCTYPE is not closed.");n=t.substring(n,e).indexOf("[")>=0?t.indexOf("]>",n)+1:e}else if("!["===t.substr(n+1,2)){const s=j(t,"]]>",n,"CDATA is not closed.")-2,u=t.substring(n+9,s);if(a&&(o.val=r.getValue(o.val)+""+d(o.tagname,a,e),a=""),e.cdataTagName){const t=new i(e.cdataTagName,o,u);o.addChild(t),o.val=r.getValue(o.val)+e.cdataPositionChar,u&&(t.val=u)}else o.val=(o.val||"")+(u||"");n=s+2}else{const s=w(t,n+1);let u=s.data;const l=s.index,c=u.indexOf(" ");let f=u,p=!0;if(-1!==c&&(f=u.substr(0,c).replace(/\s\s*$/,""),u=u.substr(c+1)),e.ignoreNameSpace){const t=f.indexOf(":");-1!==t&&(f=f.substr(t+1),p=f!==s.data.substr(t+1))}if(o&&a&&"!xml"!==o.tagname&&(o.val=r.getValue(o.val)+""+d(o.tagname,a,e)),u.length>0&&u.lastIndexOf("/")===u.length-1){"/"===f[f.length-1]?(f=f.substr(0,f.length-1),u=f):u=u.substr(0,u.length-1);const t=new i(f,o,"");f!==u&&(t.attrsMap=v(u,e)),o.addChild(t)}else{const t=new i(f,o);e.stopNodes.length&&e.stopNodes.includes(t.tagname)&&(t.startIndex=l),f!==u&&p&&(t.attrsMap=v(u,e)),o.addChild(t),o=t}a="",n=l}else a+=t[n]}return n}};const E={allowBooleanAttributes:!1},x=["allowBooleanAttributes"];function N(t,e){const r=e;for(;e<t.length;e++)if("?"!=t[e]&&" "!=t[e]);else{const n=t.substr(r,e-r);if(e>5&&"xml"===n)return k("InvalidXml","XML declaration allowed only at the start of the document.",F(t,e));if("?"==t[e]&&">"==t[e+1]){e++;break}}return e}function O(t,e){if(t.length>e+5&&"-"===t[e+1]&&"-"===t[e+2]){for(e+=3;e<t.length;e++)if("-"===t[e]&&"-"===t[e+1]&&">"===t[e+2]){e+=2;break}}else if(t.length>e+8&&"D"===t[e+1]&&"O"===t[e+2]&&"C"===t[e+3]&&"T"===t[e+4]&&"Y"===t[e+5]&&"P"===t[e+6]&&"E"===t[e+7]){let r=1;for(e+=8;e<t.length;e++)if("<"===t[e])r++;else if(">"===t[e]&&(r--,0===r))break}else if(t.length>e+9&&"["===t[e+1]&&"C"===t[e+2]&&"D"===t[e+3]&&"A"===t[e+4]&&"T"===t[e+5]&&"A"===t[e+6]&&"["===t[e+7])for(e+=8;e<t.length;e++)if("]"===t[e]&&"]"===t[e+1]&&">"===t[e+2]){e+=2;break}return e}function _(t,e){let r="",n="",o=!1;for(;e<t.length;e++){if('"'===t[e]||"'"===t[e])""===n?n=t[e]:n!==t[e]||(n="");else if(">"===t[e]&&""===n){o=!0;break}r+=t[e]}return""===n&&{value:r,index:e,tagClosed:o}}const P=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function C(t,e){const n=r.getAllMatches(t,P),o={};for(let t=0;t<n.length;t++){if(0===n[t][1].length)return k("InvalidAttr","Attribute '"+n[t][2]+"' has no space in starting.",M(n[t]));if(void 0===n[t][3]&&!e.allowBooleanAttributes)return k("InvalidAttr","boolean attribute '"+n[t][2]+"' is not allowed.",M(n[t]));const r=n[t][2];if(!T(r))return k("InvalidAttr","Attribute '"+r+"' is an invalid name.",M(n[t]));if(o.hasOwnProperty(r))return k("InvalidAttr","Attribute '"+r+"' is repeated.",M(n[t]));o[r]=1}return!0}function S(t,e){if(";"===t[++e])return-1;if("#"===t[e])return function(t,e){let r=/\d/;for("x"===t[e]&&(e++,r=/[\da-fA-F]/);e<t.length;e++){if(";"===t[e])return e;if(!t[e].match(r))break}return-1}(t,++e);let r=0;for(;e<t.length;e++,r++)if(!(t[e].match(/\w/)&&r<20)){if(";"===t[e])break;return-1}return e}function k(t,e,r){return{err:{code:t,msg:e,line:r.line||r,col:r.col}}}function T(t){return r.isName(t)}function F(t,e){const r=t.substring(0,e).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function M(t){return t.startIndex+t[1].length}var I=function(t,e){e=r.buildOptions(e,E,x);const n=[];let o=!1,i=!1;"\ufeff"===t[0]&&(t=t.substr(1));for(let s=0;s<t.length;s++)if("<"===t[s]&&"?"===t[s+1]){if(s+=2,s=N(t,s),s.err)return s}else{if("<"!==t[s]){if(" "===t[s]||"\t"===t[s]||"\n"===t[s]||"\r"===t[s])continue;return k("InvalidChar","char '"+t[s]+"' is not expected.",F(t,s))}{let u=s;if(s++,"!"===t[s]){s=O(t,s);continue}{let l=!1;"/"===t[s]&&(l=!0,s++);let c="";for(;s<t.length&&">"!==t[s]&&" "!==t[s]&&"\t"!==t[s]&&"\n"!==t[s]&&"\r"!==t[s];s++)c+=t[s];if(c=c.trim(),"/"===c[c.length-1]&&(c=c.substring(0,c.length-1),s--),a=c,!r.isName(a)){let e;return e=0===c.trim().length?"Invalid space after '<'.":"Tag '"+c+"' is an invalid name.",k("InvalidTag",e,F(t,s))}const f=_(t,s);if(!1===f)return k("InvalidAttr","Attributes for '"+c+"' have open quote.",F(t,s));let p=f.value;if(s=f.index,"/"===p[p.length-1]){const r=s-p.length;p=p.substring(0,p.length-1);const n=C(p,e);if(!0!==n)return k(n.err.code,n.err.msg,F(t,r+n.err.line));o=!0}else if(l){if(!f.tagClosed)return k("InvalidTag","Closing tag '"+c+"' doesn't have proper closing.",F(t,s));if(p.trim().length>0)return k("InvalidTag","Closing tag '"+c+"' can't have attributes or invalid starting.",F(t,u));{const e=n.pop();if(c!==e.tagName){let r=F(t,e.tagStartPos);return k("InvalidTag","Expected closing tag '"+e.tagName+"' (opened in line "+r.line+", col "+r.col+") instead of closing tag '"+c+"'.",F(t,u))}0==n.length&&(i=!0)}}else{const r=C(p,e);if(!0!==r)return k(r.err.code,r.err.msg,F(t,s-p.length+r.err.line));if(!0===i)return k("InvalidXml","Multiple possible root nodes found.",F(t,s));n.push({tagName:c,tagStartPos:u}),o=!0}for(s++;s<t.length;s++)if("<"===t[s]){if("!"===t[s+1]){s++,s=O(t,s);continue}if("?"!==t[s+1])break;if(s=N(t,++s),s.err)return s}else if("&"===t[s]){const e=S(t,s);if(-1==e)return k("InvalidChar","char '&' is not expected.",F(t,s));s=e}"<"===t[s]&&s--}}}var a;return o?1==n.length?k("InvalidTag","Unclosed tag '"+n[0].tagName+"'.",F(t,n[0].tagStartPos)):!(n.length>0)||k("InvalidXml","Invalid '"+JSON.stringify(n.map((t=>t.tagName)),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):k("InvalidXml","Start tag expected.",1)};const V=function(t){return String.fromCharCode(t)},D={nilChar:V(176),missingChar:V(201),nilPremitive:V(175),missingPremitive:V(200),emptyChar:V(178),emptyValue:V(177),boundryChar:V(179),objStart:V(198),arrStart:V(204),arrayEnd:V(185)},L=[D.nilChar,D.nilPremitive,D.missingChar,D.missingPremitive,D.boundryChar,D.emptyChar,D.emptyValue,D.arrayEnd,D.objStart,D.arrStart],B=function(t,e,r){if("string"==typeof e)return t&&t[0]&&void 0!==t[0].val?q(t[0].val):q(t);{const o=void 0===(n=t)?D.missingChar:null===n?D.nilChar:!(n.child&&0===Object.keys(n.child).length&&(!n.attrsMap||0===Object.keys(n.attrsMap).length))||D.emptyChar;if(!0===o){let n="";if(Array.isArray(e)){n+=D.arrStart;const o=e[0],i=t.length;if("string"==typeof o)for(let e=0;e<i;e++){const r=q(t[e].val);n=R(n,r)}else for(let e=0;e<i;e++){const i=B(t[e],o,r);n=R(n,i)}n+=D.arrayEnd}else{n+=D.objStart;const o=Object.keys(e);Array.isArray(t)&&(t=t[0]);for(let i in o){const a=o[i];let s;s=!r.ignoreAttributes&&t.attrsMap&&t.attrsMap[a]?B(t.attrsMap[a],e[a],r):a===r.textNodeName?B(t.val,e[a],r):B(t.child[a],e[a],r),n=R(n,s)}}return n}return o}var n},q=function(t){switch(t){case void 0:return D.missingPremitive;case null:return D.nilPremitive;case"":return D.emptyValue;default:return t}},R=function(t,e){return z(e[0])||z(t[t.length-1])||(t+=D.boundryChar),t+e},z=function(t){return-1!==L.indexOf(t)};const G=r.buildOptions;var U={convert2nimn:function(t,e,r){return r=G(r,A.defaultOptions,A.props),B(t,e,r)}};const J=r.buildOptions,$=function(t,e,n){let o="{";const i=Object.keys(t.child);for(let r=0;r<i.length;r++){const n=i[r];if(t.child[n]&&t.child[n].length>1){o+='"'+n+'" : [ ';for(let r in t.child[n])o+=$(t.child[n][r],e)+" , ";o=o.substr(0,o.length-1)+" ] "}else o+='"'+n+'" : '+$(t.child[n][0],e)+" ,"}return r.merge(o,t.attrsMap),r.isEmptyObject(o)?r.isExist(t.val)?t.val:"":(r.isExist(t.val)&&("string"!=typeof t.val||""!==t.val&&t.val!==e.cdataPositionChar)&&(o+='"'+e.textNodeName+'" : '+(!0!==(a=t.val)&&!1!==a&&isNaN(a)?'"'+a+'"':a)),","===o[o.length-1]&&(o=o.substr(0,o.length-2)),o+"}");var a};var W={convertToJsonString:function(t,e){return(e=J(e,A.defaultOptions,A.props)).indentBy=e.indentBy||"",$(t,e)}};const Z=r.buildOptions,X={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(t){return t},attrValueProcessor:function(t){return t}},K=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor","rootNodeName"];function Y(t){this.options=Z(t,X,K),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=at),this.options.cdataTagName?this.isCDATA=st:this.isCDATA=function(){return!1},this.replaceCDATAstr=Q,this.replaceCDATAarr=tt,this.processTextOrObjNode=H,this.options.format?(this.indentate=it,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=ot,this.buildObjNode=rt):(this.buildTextNode=nt,this.buildObjNode=et),this.buildTextValNode=nt,this.buildObjectNode=et}function H(t,e,r){const n=this.j2x(t,r+1);return void 0!==t[this.options.textNodeName]&&1===Object.keys(t).length?this.buildTextNode(n.val,e,n.attrStr,r):this.buildObjNode(n.val,e,n.attrStr,r)}function Q(t,e){return t=this.options.tagValueProcessor(""+t),""===this.options.cdataPositionChar||""===t?t+"<![CDATA["+e+"]]"+this.tagEndChar:t.replace(this.options.cdataPositionChar,"<![CDATA["+e+"]]"+this.tagEndChar)}function tt(t,e){if(t=this.options.tagValueProcessor(""+t),""===this.options.cdataPositionChar||""===t)return t+"<![CDATA["+e.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(let r in e)t=t.replace(this.options.cdataPositionChar,"<![CDATA["+e[r]+"]]>");return t+this.newLine}function et(t,e,r,n){return r&&-1===t.indexOf("<")?this.indentate(n)+"<"+e+r+">"+t+"</"+e+this.tagEndChar:this.indentate(n)+"<"+e+r+this.tagEndChar+t+this.indentate(n)+"</"+e+this.tagEndChar}function rt(t,e,r,n){return""!==t?this.buildObjectNode(t,e,r,n):this.indentate(n)+"<"+e+r+"/"+this.tagEndChar}function nt(t,e,r,n){return this.indentate(n)+"<"+e+r+">"+this.options.tagValueProcessor(t)+"</"+e+this.tagEndChar}function ot(t,e,r,n){return""!==t?this.buildTextValNode(t,e,r,n):this.indentate(n)+"<"+e+r+"/"+this.tagEndChar}function it(t){return this.options.indentBy.repeat(t)}function at(t){return!!t.startsWith(this.options.attributeNamePrefix)&&t.substr(this.attrPrefixLen)}function st(t){return t===this.options.cdataTagName}Y.prototype.parse=function(t){return Array.isArray(t)&&this.options.rootNodeName&&this.options.rootNodeName.length>1&&(t={[this.options.rootNodeName]:t}),this.j2x(t,0).val},Y.prototype.j2x=function(t,e){let r="",n="";for(let o in t)if(void 0===t[o]);else if(null===t[o])n+=this.indentate(e)+"<"+o+"/"+this.tagEndChar;else if(t[o]instanceof Date)n+=this.buildTextNode(t[o],o,"",e);else if("object"!=typeof t[o]){const i=this.isAttribute(o);i?r+=" "+i+'="'+this.options.attrValueProcessor(""+t[o])+'"':this.isCDATA(o)?t[this.options.textNodeName]?n+=this.replaceCDATAstr(t[this.options.textNodeName],t[o]):n+=this.replaceCDATAstr("",t[o]):o===this.options.textNodeName?t[this.options.cdataTagName]||(n+=this.options.tagValueProcessor(""+t[o])):n+=this.buildTextNode(t[o],o,"",e)}else if(Array.isArray(t[o]))if(this.isCDATA(o))n+=this.indentate(e),t[this.options.textNodeName]?n+=this.replaceCDATAarr(t[this.options.textNodeName],t[o]):n+=this.replaceCDATAarr("",t[o]);else{const r=t[o].length;for(let i=0;i<r;i++){const r=t[o][i];void 0===r||(n+=null===r?this.indentate(e)+"<"+o+"/"+this.tagEndChar:"object"==typeof r?this.processTextOrObjNode(r,o,e):this.buildTextNode(r,o,"",e))}}else if(this.options.attrNodeName&&o===this.options.attrNodeName){const e=Object.keys(t[o]),n=e.length;for(let i=0;i<n;i++)r+=" "+e[i]+'="'+this.options.attrValueProcessor(""+t[o][e[i]])+'"'}else n+=this.processTextOrObjNode(t[o],o,e);return{attrStr:r,val:n}};var ut=Y,lt=e((function(t,e){const n=A,i=r.buildOptions;e.parse=function(t,e={},r){if(r){!0===r&&(r={});const e=I(t,r);if(!0!==e)throw Error(e.err.msg)}e.parseTrueNumberOnly&&!1!==e.parseNodeValue&&!e.numParseOptions&&(e.numParseOptions={leadingZeros:!1});let a=i(e,n.defaultOptions,n.props);const s=A.getTraversalObj(t,a);return o.convertToJson(s,a)},e.convertTonimn=U.convert2nimn,e.getTraversalObj=A.getTraversalObj,e.convertToJson=o.convertToJson,e.convertToJsonString=W.convertToJsonString,e.validate=I,e.j2xParser=ut,e.parseToNimn=function(t,r,n){return e.convertTonimn(e.getTraversalObj(t,n),r,n)}}));function ct(t,e,r){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ft(t[0])||!ft(t[1]))throw new Error("coordinates must contain numbers");return function(t,e,r){if(!pt(r=r||{}))throw new Error("options is invalid");var n=r.bbox,o=r.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");n&&ht(n),o&&gt(o);var i={type:"Feature"};return o&&(i.id=o),n&&(i.bbox=n),i.properties=e||{},i.geometry=t,i}({type:"Point",coordinates:t},e,r)}function ft(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function pt(t){return!!t&&t.constructor===Object}function ht(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!ft(t))throw new Error("bbox must only contain numbers")}))}function gt(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function dt(t,e,r){if(null!==t)for(var n,o,i,a,s,u,l,c,f=0,p=0,h=t.type,g="FeatureCollection"===h,d="Feature"===h,y=g?t.features.length:1,b=0;b<y;b++){s=(c=!!(l=g?t.features[b].geometry:d?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var m=0;m<s;m++){var v=0,w=0;if(null!==(a=c?l.geometries[m]:l)){u=a.coordinates;var j=a.type;switch(f=!r||"Polygon"!==j&&"MultiPolygon"!==j?0:1,j){case null:break;case"Point":if(!1===e(u,p,b,v,w))return!1;p++,v++;break;case"LineString":case"MultiPoint":for(n=0;n<u.length;n++){if(!1===e(u[n],p,b,v,w))return!1;p++,"MultiPoint"===j&&v++}"LineString"===j&&v++;break;case"Polygon":case"MultiLineString":for(n=0;n<u.length;n++){for(o=0;o<u[n].length-f;o++){if(!1===e(u[n][o],p,b,v,w))return!1;p++}"MultiLineString"===j&&v++,"Polygon"===j&&w++}"Polygon"===j&&v++;break;case"MultiPolygon":for(n=0;n<u.length;n++){for("MultiPolygon"===j&&(w=0),o=0;o<u[n].length;o++){for(i=0;i<u[n][o].length-f;i++){if(!1===e(u[n][o][i],p,b,v,w))return!1;p++}w++}v++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(!1===dt(a.geometries[n],e,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function yt(t){var e=[];return"FeatureCollection"===t.type?function(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var r=0;r<t.features.length&&!1!==e(t.features[r],r);r++);}(t,(function(t){dt(t,(function(r){e.push(ct(r,t.properties))}))})):dt(t,(function(r){e.push(ct(r,t.properties))})),function(t,e){if(!pt(e=e||{}))throw new Error("options is invalid");var r=e.bbox,n=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");r&&ht(r),n&&gt(n);var o={type:"FeatureCollection"};return n&&(o.id=n),r&&(o.bbox=r),o.features=t,o}(e)}function bt(t,e,r){if(null!==t)for(var n,o,i,a,s,u,l,c,f=0,p=0,h=t.type,g="FeatureCollection"===h,d="Feature"===h,y=g?t.features.length:1,b=0;b<y;b++){s=(c=!!(l=g?t.features[b].geometry:d?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var m=0;m<s;m++){var v=0,w=0;if(null!==(a=c?l.geometries[m]:l)){u=a.coordinates;var j=a.type;switch(f=!r||"Polygon"!==j&&"MultiPolygon"!==j?0:1,j){case null:break;case"Point":if(!1===e(u,p,b,v,w))return!1;p++,v++;break;case"LineString":case"MultiPoint":for(n=0;n<u.length;n++){if(!1===e(u[n],p,b,v,w))return!1;p++,"MultiPoint"===j&&v++}"LineString"===j&&v++;break;case"Polygon":case"MultiLineString":for(n=0;n<u.length;n++){for(o=0;o<u[n].length-f;o++){if(!1===e(u[n][o],p,b,v,w))return!1;p++}"MultiLineString"===j&&v++,"Polygon"===j&&w++}"Polygon"===j&&v++;break;case"MultiPolygon":for(n=0;n<u.length;n++){for("MultiPolygon"===j&&(w=0),o=0;o<u[n].length;o++){for(i=0;i<u[n][o].length-f;i++){if(!1===e(u[n][o][i],p,b,v,w))return!1;p++}w++}v++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(!1===bt(a.geometries[n],e,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function mt(t){var e=[1/0,1/0,-1/0,-1/0];return bt(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}function vt(t,e,r){if(!jt(r=r||{}))throw new Error("options is invalid");var n=r.bbox,o=r.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");n&&function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!wt(t))throw new Error("bbox must only contain numbers")}))}(n),o&&function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}(o);var i={type:"Feature"};return o&&(i.id=o),n&&(i.bbox=n),i.properties=e||{},i.geometry=t,i}function wt(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function jt(t){return!!t&&t.constructor===Object}function At(t,e){if(!jt(e=e||{}))throw new Error("options is invalid");var r=e.properties;if(!t)throw new Error("geojson is required");var n=mt(t);return function(t,e,r){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!wt(t[0])||!wt(t[1]))throw new Error("coordinates must contain numbers");return vt({type:"Point",coordinates:t},e,r)}([(n[0]+n[2])/2,(n[1]+n[3])/2],r)}function Et(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return xt(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach((function(r){switch(r){case"type":case"features":return;default:e[r]=t[r]}})),e.features=t.features.map((function(t){return xt(t)})),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Ot(t);default:throw new Error("unknown GeoJSON type")}}function xt(t){var e={type:"Feature"};return Object.keys(t).forEach((function(r){switch(r){case"type":case"properties":case"geometry":return;default:e[r]=t[r]}})),e.properties=Nt(t.properties),e.geometry=Ot(t.geometry),e}function Nt(t){var e={};return t?(Object.keys(t).forEach((function(r){var n=t[r];"object"==typeof n?null===n?e[r]=null:n.length?e[r]=n.map((function(t){return t})):e[r]=Nt(n):e[r]=n})),e):e}function Ot(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return Ot(t)})),e):(e.coordinates=_t(t.coordinates),e)}function _t(t){return"object"!=typeof t[0]?t.slice():t.map((function(t){return _t(t)}))}lt.parse,lt.convertTonimn,lt.getTraversalObj,lt.convertToJson,lt.convertToJsonString,lt.validate,lt.j2xParser,lt.parseToNimn;var Pt={meters:6371008.8,metres:6371008.8,millimeters:6371008800,millimetres:6371008800,centimeters:637100880,centimetres:637100880,kilometers:6371.0088,kilometres:6371.0088,miles:3958.761333810546,nauticalmiles:6371008.8/1852,inches:6371008.8*39.37,yards:6371008.8/1.0936,feet:20902260.511392,radians:1,degrees:6371008.8/111325};function Ct(t){if(null==t)throw new Error("degrees is required");return t%360*Math.PI/180}function St(t){if(!t)throw new Error("coord is required");if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates;if(Array.isArray(t)&&t.length>=2&&void 0===t[0].length&&void 0===t[1].length)return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function kt(t,e,r){if(!(n=r=r||{})||n.constructor!==Object)throw new Error("options is invalid");var n,o=r.units,i=St(t),a=St(e),s=Ct(a[1]-i[1]),u=Ct(a[0]-i[0]),l=Ct(i[1]),c=Ct(a[1]),f=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(u/2),2)*Math.cos(l)*Math.cos(c);return function(t,e){if(null==t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var r=Pt[e||"kilometers"];if(!r)throw new Error(e+" units is invalid");return t*r}(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),o)}function Tt(t,e,r){if(!It(r=r||{}))throw new Error("options is invalid");var n=r.bbox,o=r.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");n&&Vt(n),o&&Dt(o);var i={type:"Feature"};return o&&(i.id=o),n&&(i.bbox=n),i.properties=e||{},i.geometry=t,i}function Ft(t,e){if(!It(e=e||{}))throw new Error("options is invalid");var r=e.bbox,n=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");r&&Vt(r),n&&Dt(n);var o={type:"FeatureCollection"};return n&&(o.id=n),r&&(o.bbox=r),o.features=t,o}function Mt(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function It(t){return!!t&&t.constructor===Object}function Vt(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!Mt(t))throw new Error("bbox must only contain numbers")}))}function Dt(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function Lt(t,e,r){if("object"!=typeof(r=r||{}))throw new Error("options is invalid");var n=r.ignoreBoundary;if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var o=function(t){if(!t)throw new Error("coord is required");if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates;if(Array.isArray(t)&&t.length>=2&&void 0===t[0].length&&void 0===t[1].length)return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}(t),i=function(t){if(!t)throw new Error("coords is required");if("Feature"===t.type&&null!==t.geometry)return t.geometry.coordinates;if(t.coordinates)return t.coordinates;if(Array.isArray(t))return t;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}(e),a=e.geometry?e.geometry.type:e.type,s=e.bbox;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(o,s))return!1;"Polygon"===a&&(i=[i]);for(var u=0,l=!1;u<i.length&&!l;u++)if(Bt(o,i[u][0],n)){for(var c=!1,f=1;f<i[u].length&&!c;)Bt(o,i[u][f],!n)&&(c=!0),f++;c||(l=!0)}return l}function Bt(t,e,r){var n=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var o=0,i=e.length-1;o<e.length;i=o++){var a=e[o][0],s=e[o][1],u=e[i][0],l=e[i][1];if(t[1]*(a-u)+s*(u-t[0])+l*(t[0]-a)==0&&(a-t[0])*(u-t[0])<=0&&(s-t[1])*(l-t[1])<=0)return!r;s>t[1]!=l>t[1]&&t[0]<(u-a)*(t[1]-s)/(l-s)+a&&(n=!n)}return n}function qt(t){for(var e=function(t){if("FeatureCollection"!==t.type)return"Feature"!==t.type?Ft([Tt(t)]):Ft([t]);return t}(t),r=At(e),n=!1,o=0;!n&&o<e.features.length;){var i,a=e.features[o].geometry,s=!1;if("Point"===a.type)r.geometry.coordinates[0]===a.coordinates[0]&&r.geometry.coordinates[1]===a.coordinates[1]&&(n=!0);else if("MultiPoint"===a.type){var u=!1;for(i=0;!u&&i<a.coordinates.length;)r.geometry.coordinates[0]===a.coordinates[i][0]&&r.geometry.coordinates[1]===a.coordinates[i][1]&&(n=!0,u=!0),i++}else if("LineString"===a.type)for(i=0;!s&&i<a.coordinates.length-1;)Rt(r.geometry.coordinates[0],r.geometry.coordinates[1],a.coordinates[i][0],a.coordinates[i][1],a.coordinates[i+1][0],a.coordinates[i+1][1])&&(s=!0,n=!0),i++;else if("MultiLineString"===a.type)for(var l=0;l<a.coordinates.length;){s=!1,i=0;for(var c=a.coordinates[l];!s&&i<c.length-1;)Rt(r.geometry.coordinates[0],r.geometry.coordinates[1],c[i][0],c[i][1],c[i+1][0],c[i+1][1])&&(s=!0,n=!0),i++;l++}else"Polygon"!==a.type&&"MultiPolygon"!==a.type||Lt(r,a)&&(n=!0);o++}if(n)return r;var f=Ft([]);for(o=0;o<e.features.length;o++)f.features=f.features.concat(yt(e.features[o]).features);return function(t,e,r){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Mt(t[0])||!Mt(t[1]))throw new Error("coordinates must contain numbers");return Tt({type:"Point",coordinates:t},e,r)}(function(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var r,n=1/0;return function(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var r=0;r<t.features.length&&!1!==e(t.features[r],r);r++);}(e,(function(e,o){var i=kt(t,e);i<n&&((r=Et(e)).properties.featureIndex=o,r.properties.distanceToPoint=i,n=i)})),r}(r,f).geometry.coordinates)}function Rt(t,e,r,n,o,i){return Math.sqrt((o-r)*(o-r)+(i-n)*(i-n))===Math.sqrt((t-r)*(t-r)+(e-n)*(e-n))+Math.sqrt((o-t)*(o-t)+(i-e)*(i-e))}function zt(t,e,r){var n=r;return function(t,e){var r,n,o,i,a,s,u,l,c,f,p=0,h="FeatureCollection"===t.type,g="Feature"===t.type,d=h?t.features.length:1;for(r=0;r<d;r++){for(s=h?t.features[r].geometry:g?t.geometry:t,l=h?t.features[r].properties:g?t.properties:{},c=h?t.features[r].bbox:g?t.bbox:void 0,f=h?t.features[r].id:g?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,o=0;o<a;o++)if(null!==(i=u?s.geometries[o]:s))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(i,p,l,c,f))return!1;break;case"GeometryCollection":for(n=0;n<i.geometries.length;n++)if(!1===e(i.geometries[n],p,l,c,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,l,c,f))return!1;p++}}(t,(function(t,o,i,a,s){n=0===o&&void 0===r?t:e(n,t,o,i,a,s)})),n}function Gt(t){return zt(t,(function(t,e){return t+function(t){var e,r=0;switch(t.type){case"Polygon":return Ut(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)r+=Ut(t.coordinates[e]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)}),0)}function Ut(t){var e=0;if(t&&t.length>0){e+=Math.abs(Jt(t[0]));for(var r=1;r<t.length;r++)e-=Math.abs(Jt(t[r]))}return e}function Jt(t){var e,r,n,o,i,a,s=0,u=t.length;if(u>2){for(a=0;a<u;a++)a===u-2?(n=u-2,o=u-1,i=0):a===u-1?(n=u-1,o=0,i=1):(n=a,o=a+1,i=a+2),e=t[n],r=t[o],s+=($t(t[i][0])-$t(e[0]))*Math.sin($t(r[1]));s=6378137*s*6378137/2}return s}function $t(t){return t*Math.PI/180}function Wt(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var n,o=function(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}(t),i="Feature"===(n=e).type?n.geometry:n,a=i.type,s=e.bbox,u=i.coordinates;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(o,s))return!1;"Polygon"===a&&(u=[u]);for(var l=!1,c=0;c<u.length&&!l;c++)if(Zt(o,u[c][0],r.ignoreBoundary)){for(var f=!1,p=1;p<u[c].length&&!f;)Zt(o,u[c][p],!r.ignoreBoundary)&&(f=!0),p++;f||(l=!0)}return l}function Zt(t,e,r){var n=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var o=0,i=e.length-1;o<e.length;i=o++){var a=e[o][0],s=e[o][1],u=e[i][0],l=e[i][1];if(t[1]*(a-u)+s*(u-t[0])+l*(t[0]-a)==0&&(a-t[0])*(u-t[0])<=0&&(s-t[1])*(l-t[1])<=0)return!r;s>t[1]!=l>t[1]&&t[0]<(u-a)*(t[1]-s)/(l-s)+a&&(n=!n)}return n}function Xt(t,e){void 0===e&&(e={});var r=Number(t[0]),n=Number(t[1]),o=Number(t[2]),i=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var a=[r,n];return function(t,e,r){void 0===r&&(r={});for(var n=0,o=t;n<o.length;n++){var i=o[n];if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<i[i.length-1].length;a++)if(i[i.length-1][a]!==i[0][a])throw new Error("First and last Position are not equivalent.")}return function(t,e,r){void 0===r&&(r={});var n={type:"Feature"};return(0===r.id||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=e||{},n.geometry=t,n}({type:"Polygon",coordinates:t},e,r)}([[a,[o,n],[o,i],[r,i],a]],e.properties,{bbox:t,id:e.id})}var Kt=function(){this.__data__=[],this.size=0};var Yt=function(t,e){return t===e||t!=t&&e!=e};var Ht=function(t,e){for(var r=t.length;r--;)if(Yt(t[r][0],e))return r;return-1},Qt=Array.prototype.splice;var te=function(t){var e=this.__data__,r=Ht(e,t);return!(r<0)&&(r==e.length-1?e.pop():Qt.call(e,r,1),--this.size,!0)};var ee=function(t){var e=this.__data__,r=Ht(e,t);return r<0?void 0:e[r][1]};var re=function(t){return Ht(this.__data__,t)>-1};var ne=function(t,e){var r=this.__data__,n=Ht(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function oe(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}oe.prototype.clear=Kt,oe.prototype.delete=te,oe.prototype.get=ee,oe.prototype.has=re,oe.prototype.set=ne;var ie=oe;var ae=function(){this.__data__=new ie,this.size=0};var se=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r};var ue=function(t){return this.__data__.get(t)};var le=function(t){return this.__data__.has(t)},ce="object"==typeof t&&t&&t.Object===Object&&t,fe="object"==typeof self&&self&&self.Object===Object&&self,pe=ce||fe||Function("return this")(),he=pe.Symbol,ge=Object.prototype,de=ge.hasOwnProperty,ye=ge.toString,be=he?he.toStringTag:void 0;var me=function(t){var e=de.call(t,be),r=t[be];try{t[be]=void 0;var n=!0}catch(t){}var o=ye.call(t);return n&&(e?t[be]=r:delete t[be]),o},ve=Object.prototype.toString;var we=function(t){return ve.call(t)},je=he?he.toStringTag:void 0;var Ae=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":je&&je in Object(t)?me(t):we(t)};var Ee=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var xe,Ne=function(t){if(!Ee(t))return!1;var e=Ae(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},Oe=pe["__core-js_shared__"],_e=(xe=/[^.]+$/.exec(Oe&&Oe.keys&&Oe.keys.IE_PROTO||""))?"Symbol(src)_1."+xe:"";var Pe=function(t){return!!_e&&_e in t},Ce=Function.prototype.toString;var Se=function(t){if(null!=t){try{return Ce.call(t)}catch(t){}try{return t+""}catch(t){}}return""},ke=/^\[object .+?Constructor\]$/,Te=Function.prototype,Fe=Object.prototype,Me=Te.toString,Ie=Fe.hasOwnProperty,Ve=RegExp("^"+Me.call(Ie).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var De=function(t){return!(!Ee(t)||Pe(t))&&(Ne(t)?Ve:ke).test(Se(t))};var Le=function(t,e){return null==t?void 0:t[e]};var Be=function(t,e){var r=Le(t,e);return De(r)?r:void 0},qe=Be(pe,"Map"),Re=Be(Object,"create");var ze=function(){this.__data__=Re?Re(null):{},this.size=0};var Ge=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Ue=Object.prototype.hasOwnProperty;var Je=function(t){var e=this.__data__;if(Re){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return Ue.call(e,t)?e[t]:void 0},$e=Object.prototype.hasOwnProperty;var We=function(t){var e=this.__data__;return Re?void 0!==e[t]:$e.call(e,t)};var Ze=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Re&&void 0===e?"__lodash_hash_undefined__":e,this};function Xe(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Xe.prototype.clear=ze,Xe.prototype.delete=Ge,Xe.prototype.get=Je,Xe.prototype.has=We,Xe.prototype.set=Ze;var Ke=Xe;var Ye=function(){this.size=0,this.__data__={hash:new Ke,map:new(qe||ie),string:new Ke}};var He=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var Qe=function(t,e){var r=t.__data__;return He(e)?r["string"==typeof e?"string":"hash"]:r.map};var tr=function(t){var e=Qe(this,t).delete(t);return this.size-=e?1:0,e};var er=function(t){return Qe(this,t).get(t)};var rr=function(t){return Qe(this,t).has(t)};var nr=function(t,e){var r=Qe(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function or(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}or.prototype.clear=Ye,or.prototype.delete=tr,or.prototype.get=er,or.prototype.has=rr,or.prototype.set=nr;var ir=or;var ar=function(t,e){var r=this.__data__;if(r instanceof ie){var n=r.__data__;if(!qe||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new ir(n)}return r.set(t,e),this.size=r.size,this};function sr(t){var e=this.__data__=new ie(t);this.size=e.size}sr.prototype.clear=ae,sr.prototype.delete=se,sr.prototype.get=ue,sr.prototype.has=le,sr.prototype.set=ar;var ur=sr;var lr=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t},cr=function(){try{var t=Be(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var fr=function(t,e,r){"__proto__"==e&&cr?cr(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r},pr=Object.prototype.hasOwnProperty;var hr=function(t,e,r){var n=t[e];pr.call(t,e)&&Yt(n,r)&&(void 0!==r||e in t)||fr(t,e,r)};var gr=function(t,e,r,n){var o=!r;r||(r={});for(var i=-1,a=e.length;++i<a;){var s=e[i],u=n?n(r[s],t[s],s,r,t):void 0;void 0===u&&(u=t[s]),o?fr(r,s,u):hr(r,s,u)}return r};var dr=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n};var yr=function(t){return null!=t&&"object"==typeof t};var br=function(t){return yr(t)&&"[object Arguments]"==Ae(t)},mr=Object.prototype,vr=mr.hasOwnProperty,wr=mr.propertyIsEnumerable,jr=br(function(){return arguments}())?br:function(t){return yr(t)&&vr.call(t,"callee")&&!wr.call(t,"callee")},Ar=Array.isArray;var Er=function(){return!1},xr=e((function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r?pe.Buffer:void 0,i=(o?o.isBuffer:void 0)||Er;t.exports=i})),Nr=/^(?:0|[1-9]\d*)$/;var Or=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&Nr.test(t))&&t>-1&&t%1==0&&t<e};var _r=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},Pr={};Pr["[object Float32Array]"]=Pr["[object Float64Array]"]=Pr["[object Int8Array]"]=Pr["[object Int16Array]"]=Pr["[object Int32Array]"]=Pr["[object Uint8Array]"]=Pr["[object Uint8ClampedArray]"]=Pr["[object Uint16Array]"]=Pr["[object Uint32Array]"]=!0,Pr["[object Arguments]"]=Pr["[object Array]"]=Pr["[object ArrayBuffer]"]=Pr["[object Boolean]"]=Pr["[object DataView]"]=Pr["[object Date]"]=Pr["[object Error]"]=Pr["[object Function]"]=Pr["[object Map]"]=Pr["[object Number]"]=Pr["[object Object]"]=Pr["[object RegExp]"]=Pr["[object Set]"]=Pr["[object String]"]=Pr["[object WeakMap]"]=!1;var Cr=function(t){return yr(t)&&_r(t.length)&&!!Pr[Ae(t)]};var Sr=function(t){return function(e){return t(e)}},kr=e((function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r&&ce.process,i=function(){try{var t=n&&n.require&&n.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=i})),Tr=kr&&kr.isTypedArray,Fr=Tr?Sr(Tr):Cr,Mr=Object.prototype.hasOwnProperty;var Ir=function(t,e){var r=Ar(t),n=!r&&jr(t),o=!r&&!n&&xr(t),i=!r&&!n&&!o&&Fr(t),a=r||n||o||i,s=a?dr(t.length,String):[],u=s.length;for(var l in t)!e&&!Mr.call(t,l)||a&&("length"==l||o&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Or(l,u))||s.push(l);return s},Vr=Object.prototype;var Dr=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Vr)};var Lr=function(t,e){return function(r){return t(e(r))}},Br=Lr(Object.keys,Object),qr=Object.prototype.hasOwnProperty;var Rr=function(t){if(!Dr(t))return Br(t);var e=[];for(var r in Object(t))qr.call(t,r)&&"constructor"!=r&&e.push(r);return e};var zr=function(t){return null!=t&&_r(t.length)&&!Ne(t)};var Gr=function(t){return zr(t)?Ir(t):Rr(t)};var Ur=function(t,e){return t&&gr(e,Gr(e),t)};var Jr=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e},$r=Object.prototype.hasOwnProperty;var Wr=function(t){if(!Ee(t))return Jr(t);var e=Dr(t),r=[];for(var n in t)("constructor"!=n||!e&&$r.call(t,n))&&r.push(n);return r};var Zr=function(t){return zr(t)?Ir(t,!0):Wr(t)};var Xr=function(t,e){return t&&gr(e,Zr(e),t)},Kr=e((function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r?pe.Buffer:void 0,i=o?o.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var r=t.length,n=i?i(r):new t.constructor(r);return t.copy(n),n}}));var Yr=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e};var Hr=function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var a=t[r];e(a,r,t)&&(i[o++]=a)}return i};var Qr=function(){return[]},tn=Object.prototype.propertyIsEnumerable,en=Object.getOwnPropertySymbols,rn=en?function(t){return null==t?[]:(t=Object(t),Hr(en(t),(function(e){return tn.call(t,e)})))}:Qr;var nn=function(t,e){return gr(t,rn(t),e)};var on=function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t},an=Lr(Object.getPrototypeOf,Object),sn=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)on(e,rn(t)),t=an(t);return e}:Qr;var un=function(t,e){return gr(t,sn(t),e)};var ln=function(t,e,r){var n=e(t);return Ar(t)?n:on(n,r(t))};var cn=function(t){return ln(t,Gr,rn)};var fn=function(t){return ln(t,Zr,sn)},pn=Be(pe,"DataView"),hn=Be(pe,"Promise"),gn=Be(pe,"Set"),dn=Be(pe,"WeakMap"),yn=Se(pn),bn=Se(qe),mn=Se(hn),vn=Se(gn),wn=Se(dn),jn=Ae;(pn&&"[object DataView]"!=jn(new pn(new ArrayBuffer(1)))||qe&&"[object Map]"!=jn(new qe)||hn&&"[object Promise]"!=jn(hn.resolve())||gn&&"[object Set]"!=jn(new gn)||dn&&"[object WeakMap]"!=jn(new dn))&&(jn=function(t){var e=Ae(t),r="[object Object]"==e?t.constructor:void 0,n=r?Se(r):"";if(n)switch(n){case yn:return"[object DataView]";case bn:return"[object Map]";case mn:return"[object Promise]";case vn:return"[object Set]";case wn:return"[object WeakMap]"}return e});var An=jn,En=Object.prototype.hasOwnProperty;var xn=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&En.call(t,"index")&&(r.index=t.index,r.input=t.input),r},Nn=pe.Uint8Array;var On=function(t){var e=new t.constructor(t.byteLength);return new Nn(e).set(new Nn(t)),e};var _n=function(t,e){var r=e?On(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)},Pn=/\w*$/;var Cn=function(t){var e=new t.constructor(t.source,Pn.exec(t));return e.lastIndex=t.lastIndex,e},Sn=he?he.prototype:void 0,kn=Sn?Sn.valueOf:void 0;var Tn=function(t){return kn?Object(kn.call(t)):{}};var Fn=function(t,e){var r=e?On(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)};var Mn=function(t,e,r){var n=t.constructor;switch(e){case"[object ArrayBuffer]":return On(t);case"[object Boolean]":case"[object Date]":return new n(+t);case"[object DataView]":return _n(t,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Fn(t,r);case"[object Map]":case"[object Set]":return new n;case"[object Number]":case"[object String]":return new n(t);case"[object RegExp]":return Cn(t);case"[object Symbol]":return Tn(t)}},In=Object.create,Vn=function(){function t(){}return function(e){if(!Ee(e))return{};if(In)return In(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();var Dn=function(t){return"function"!=typeof t.constructor||Dr(t)?{}:Vn(an(t))};var Ln=function(t){return yr(t)&&"[object Map]"==An(t)},Bn=kr&&kr.isMap,qn=Bn?Sr(Bn):Ln;var Rn=function(t){return yr(t)&&"[object Set]"==An(t)},zn=kr&&kr.isSet,Gn=zn?Sr(zn):Rn,Un={};Un["[object Arguments]"]=Un["[object Array]"]=Un["[object ArrayBuffer]"]=Un["[object DataView]"]=Un["[object Boolean]"]=Un["[object Date]"]=Un["[object Float32Array]"]=Un["[object Float64Array]"]=Un["[object Int8Array]"]=Un["[object Int16Array]"]=Un["[object Int32Array]"]=Un["[object Map]"]=Un["[object Number]"]=Un["[object Object]"]=Un["[object RegExp]"]=Un["[object Set]"]=Un["[object String]"]=Un["[object Symbol]"]=Un["[object Uint8Array]"]=Un["[object Uint8ClampedArray]"]=Un["[object Uint16Array]"]=Un["[object Uint32Array]"]=!0,Un["[object Error]"]=Un["[object Function]"]=Un["[object WeakMap]"]=!1;var Jn=function t(e,r,n,o,i,a){var s,u=1&r,l=2&r,c=4&r;if(n&&(s=i?n(e,o,i,a):n(e)),void 0!==s)return s;if(!Ee(e))return e;var f=Ar(e);if(f){if(s=xn(e),!u)return Yr(e,s)}else{var p=An(e),h="[object Function]"==p||"[object GeneratorFunction]"==p;if(xr(e))return Kr(e,u);if("[object Object]"==p||"[object Arguments]"==p||h&&!i){if(s=l||h?{}:Dn(e),!u)return l?un(e,Xr(s,e)):nn(e,Ur(s,e))}else{if(!Un[p])return i?e:{};s=Mn(e,p,u)}}a||(a=new ur);var g=a.get(e);if(g)return g;a.set(e,s),Gn(e)?e.forEach((function(o){s.add(t(o,r,n,o,e,a))})):qn(e)&&e.forEach((function(o,i){s.set(i,t(o,r,n,i,e,a))}));var d=f?void 0:(c?l?fn:cn:l?Zr:Gr)(e);return lr(d||e,(function(o,i){d&&(o=e[i=o]),hr(s,i,t(o,r,n,i,e,a))})),s};var $n=function(t){return Jn(t,4)};function Wn(t,e){return t>e?1:t<e?-1:0}class Zn{constructor(t=Wn,e=!1){this._compare=t,this._root=null,this._size=0,this._noDuplicates=!!e}rotateLeft(t){var e=t.right;e&&(t.right=e.left,e.left&&(e.left.parent=t),e.parent=t.parent),t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.left=t),t.parent=e}rotateRight(t){var e=t.left;e&&(t.left=e.right,e.right&&(e.right.parent=t),e.parent=t.parent),t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.right=t),t.parent=e}_splay(t){for(;t.parent;){var e=t.parent;e.parent?e.left===t&&e.parent.left===e?(this.rotateRight(e.parent),this.rotateRight(e)):e.right===t&&e.parent.right===e?(this.rotateLeft(e.parent),this.rotateLeft(e)):e.left===t&&e.parent.right===e?(this.rotateRight(e),this.rotateLeft(e)):(this.rotateLeft(e),this.rotateRight(e)):e.left===t?this.rotateRight(e):this.rotateLeft(e)}}splay(t){for(var e,r,n,o,i;t.parent;)(r=(e=t.parent).parent)&&r.parent?((n=r.parent).left===r?n.left=t:n.right=t,t.parent=n):(t.parent=null,this._root=t),o=t.left,i=t.right,t===e.left?(r&&(r.left===e?(e.right?(r.left=e.right,r.left.parent=r):r.left=null,e.right=r,r.parent=e):(o?(r.right=o,o.parent=r):r.right=null,t.left=r,r.parent=t)),i?(e.left=i,i.parent=e):e.left=null,t.right=e,e.parent=t):(r&&(r.right===e?(e.left?(r.right=e.left,r.right.parent=r):r.right=null,e.left=r,r.parent=e):(i?(r.left=i,i.parent=r):r.left=null,t.right=r,r.parent=t)),o?(e.right=o,o.parent=e):e.right=null,t.left=e,e.parent=t)}replace(t,e){t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.parent=t.parent)}minNode(t=this._root){if(t)for(;t.left;)t=t.left;return t}maxNode(t=this._root){if(t)for(;t.right;)t=t.right;return t}insert(t,e){var r=this._root,n=null,o=this._compare;if(this._noDuplicates)for(;r;){if(n=r,0===o(r.key,t))return;r=o(r.key,t)<0?r.right:r.left}else for(;r;)n=r,r=o(r.key,t)<0?r.right:r.left;return r={key:t,data:e,left:null,right:null,parent:n},n?o(n.key,r.key)<0?n.right=r:n.left=r:this._root=r,this.splay(r),this._size++,r}find(t){for(var e=this._root,r=this._compare;e;){var n=r(e.key,t);if(n<0)e=e.right;else{if(!(n>0))return e;e=e.left}}return null}contains(t){for(var e=this._root,r=this._compare;e;){var n=r(t,e.key);if(0===n)return!0;e=n<0?e.left:e.right}return!1}remove(t){var e=this.find(t);if(!e)return!1;if(this.splay(e),e.left)if(e.right){var r=this.minNode(e.right);r.parent!==e&&(this.replace(r,r.right),r.right=e.right,r.right.parent=r),this.replace(e,r),r.left=e.left,r.left.parent=r}else this.replace(e,e.left);else this.replace(e,e.right);return this._size--,!0}removeNode(t){if(!t)return!1;if(this.splay(t),t.left)if(t.right){var e=this.minNode(t.right);e.parent!==t&&(this.replace(e,e.right),e.right=t.right,e.right.parent=e),this.replace(t,e),e.left=t.left,e.left.parent=e}else this.replace(t,t.left);else this.replace(t,t.right);return this._size--,!0}erase(t){var e=this.find(t);if(e){this.splay(e);var r=e.left,n=e.right,o=null;r&&(r.parent=null,o=this.maxNode(r),this.splay(o),this._root=o),n&&(r?o.right=n:this._root=n,n.parent=o),this._size--}}pop(){var t=this._root,e=null;if(t){for(;t.left;)t=t.left;e={key:t.key,data:t.data},this.remove(t.key)}return e}next(t){var e=t;if(e)if(e.right)for(e=e.right;e&&e.left;)e=e.left;else for(e=t.parent;e&&e.right===t;)t=e,e=e.parent;return e}prev(t){var e=t;if(e)if(e.left)for(e=e.left;e&&e.right;)e=e.right;else for(e=t.parent;e&&e.left===t;)t=e,e=e.parent;return e}forEach(t){for(var e=this._root,r=[],n=!1,o=0;!n;)e?(r.push(e),e=e.left):r.length>0?(t(e=r.pop(),o++),e=e.right):n=!0;return this}range(t,e,r,n){const o=[],i=this._compare;let a,s=this._root;for(;0!==o.length||s;)if(s)o.push(s),s=s.left;else{if(s=o.pop(),a=i(s.key,e),a>0)break;if(i(s.key,t)>=0&&r.call(n,s))return this;s=s.right}return this}keys(){for(var t=this._root,e=[],r=[],n=!1;!n;)t?(e.push(t),t=t.left):e.length>0?(t=e.pop(),r.push(t.key),t=t.right):n=!0;return r}values(){for(var t=this._root,e=[],r=[],n=!1;!n;)t?(e.push(t),t=t.left):e.length>0?(t=e.pop(),r.push(t.data),t=t.right):n=!0;return r}at(t){for(var e=this._root,r=[],n=!1,o=0;!n;)if(e)r.push(e),e=e.left;else if(r.length>0){if(e=r.pop(),o===t)return e;o++,e=e.right}else n=!0;return null}load(t=[],e=[],r=!1){if(0!==this._size)throw new Error("bulk-load: tree is not empty");const n=t.length;return r&&Kn(t,e,0,n-1,this._compare),this._root=Xn(null,t,e,0,n),this._size=n,this}min(){var t=this.minNode(this._root);return t?t.key:null}max(){var t=this.maxNode(this._root);return t?t.key:null}isEmpty(){return null===this._root}get size(){return this._size}static createTree(t,e,r,n,o){return new Zn(r,o).load(t,e,n)}}function Xn(t,e,r,n,o){const i=o-n;if(i>0){const a=n+Math.floor(i/2),s={key:e[a],data:r[a],parent:t};return s.left=Xn(s,e,r,n,a),s.right=Xn(s,e,r,a+1,o),s}return null}function Kn(t,e,r,n,o){if(r>=n)return;const i=t[r+n>>1];let a=r-1,s=n+1;for(;;){do{a++}while(o(t[a],i)<0);do{s--}while(o(t[s],i)>0);if(a>=s)break;let r=t[a];t[a]=t[s],t[s]=r,r=e[a],e[a]=e[s],e[s]=r}Kn(t,e,r,s,o),Kn(t,e,s+1,n,o)}function Yn(t,e,r){null===e?(t.inOut=!1,t.otherInOut=!0):(t.isSubject===e.isSubject?(t.inOut=!e.inOut,t.otherInOut=e.otherInOut):(t.inOut=!e.otherInOut,t.otherInOut=e.isVertical()?!e.inOut:e.inOut),e&&(t.prevInResult=!Hn(e,r)||e.isVertical()?e.prevInResult:e)),t.inResult=Hn(t,r)}function Hn(t,e){switch(t.type){case 0:switch(e){case 0:return!t.otherInOut;case 1:return t.otherInOut;case 2:return t.isSubject&&t.otherInOut||!t.isSubject&&!t.otherInOut;case 3:return!0}break;case 2:return 0===e||1===e;case 3:return 2===e;case 1:return!1}return!1}class Qn{constructor(t,e,r,n,o){this.left=e,this.point=t,this.otherEvent=r,this.isSubject=n,this.type=o||0,this.inOut=!1,this.otherInOut=!1,this.prevInResult=null,this.inResult=!1,this.resultInOut=!1,this.isExteriorRing=!0}isBelow(t){const e=this.point,r=this.otherEvent.point;return this.left?(e[0]-t[0])*(r[1]-t[1])-(r[0]-t[0])*(e[1]-t[1])>0:(r[0]-t[0])*(e[1]-t[1])-(e[0]-t[0])*(r[1]-t[1])>0}isAbove(t){return!this.isBelow(t)}isVertical(){return this.point[0]===this.otherEvent.point[0]}clone(){const t=new Qn(this.point,this.left,this.otherEvent,this.isSubject,this.type);return t.inResult=this.inResult,t.prevInResult=this.prevInResult,t.isExteriorRing=this.isExteriorRing,t.inOut=this.inOut,t.otherInOut=this.otherInOut,t}}function to(t,e){return t[0]===e[0]&&t[1]===e[1]}function eo(t,e,r){return(t[0]-r[0])*(e[1]-r[1])-(e[0]-r[0])*(t[1]-r[1])}function ro(t,e){const r=t.point,n=e.point;return r[0]>n[0]?1:r[0]<n[0]?-1:r[1]!==n[1]?r[1]>n[1]?1:-1:function(t,e,r,n){if(t.left!==e.left)return t.left?1:-1;if(0!==eo(r,t.otherEvent.point,e.otherEvent.point))return t.isBelow(e.otherEvent.point)?-1:1;return!t.isSubject&&e.isSubject?1:-1}(t,e,r)}function no(t,e,r){const n=new Qn(e,!1,t,t.isSubject),o=new Qn(e,!0,t.otherEvent,t.isSubject);return to(t.point,t.otherEvent.point)&&console.warn("what is that, a collapsed segment?",t),n.contourId=o.contourId=t.contourId,ro(o,t.otherEvent)>0&&(t.otherEvent.left=!0,o.left=!1),t.otherEvent.otherEvent=o,t.otherEvent=n,r.push(o),r.push(n),r}function oo(t,e){return t[0]*e[1]-t[1]*e[0]}function io(t,e){return t[0]*e[0]+t[1]*e[1]}function ao(t,e,r){const n=function(t,e,r,n,o){const i=[e[0]-t[0],e[1]-t[1]],a=[n[0]-r[0],n[1]-r[1]];function s(t,e,r){return[t[0]+e*r[0],t[1]+e*r[1]]}const u=[r[0]-t[0],r[1]-t[1]];let l=oo(i,a),c=l*l;const f=io(i,i);if(c>0){const e=oo(u,a)/l;if(e<0||e>1)return null;const n=oo(u,i)/l;return n<0||n>1?null:0===e||1===e?o?null:[s(t,e,i)]:0===n||1===n?o?null:[s(r,n,a)]:[s(t,e,i)]}if(l=oo(u,i),c=l*l,c>0)return null;const p=io(i,u)/f,h=p+io(i,a)/f,g=Math.min(p,h),d=Math.max(p,h);return g<=1&&d>=0?1===g?o?null:[s(t,g>0?g:0,i)]:0===d?o?null:[s(t,d<1?d:1,i)]:o&&0===g&&1===d?null:[s(t,g>0?g:0,i),s(t,d<1?d:1,i)]:null}(t.point,t.otherEvent.point,e.point,e.otherEvent.point),o=n?n.length:0;if(0===o)return 0;if(1===o&&(to(t.point,e.point)||to(t.otherEvent.point,e.otherEvent.point)))return 0;if(2===o&&t.isSubject===e.isSubject)return 0;if(1===o)return to(t.point,n[0])||to(t.otherEvent.point,n[0])||no(t,n[0],r),to(e.point,n[0])||to(e.otherEvent.point,n[0])||no(e,n[0],r),1;const i=[];let a=!1,s=!1;return to(t.point,e.point)?a=!0:1===ro(t,e)?i.push(e,t):i.push(t,e),to(t.otherEvent.point,e.otherEvent.point)?s=!0:1===ro(t.otherEvent,e.otherEvent)?i.push(e.otherEvent,t.otherEvent):i.push(t.otherEvent,e.otherEvent),a&&s||a?(e.type=1,t.type=e.inOut===t.inOut?2:3,a&&!s&&no(i[1].otherEvent,i[0].point,r),2):s?(no(i[0],i[1].point,r),3):i[0]!==i[3].otherEvent?(no(i[0],i[1].point,r),no(i[1],i[2].point,r),3):(no(i[0],i[1].point,r),no(i[3].otherEvent,i[2].point,r),3)}function so(t,e){if(t===e)return 0;if(0!==eo(t.point,t.otherEvent.point,e.point)||0!==eo(t.point,t.otherEvent.point,e.otherEvent.point))return to(t.point,e.point)?t.isBelow(e.otherEvent.point)?-1:1:t.point[0]===e.point[0]?t.point[1]<e.point[1]?-1:1:1===ro(t,e)?e.isAbove(t.point)?-1:1:t.isBelow(e.point)?-1:1;if(t.isSubject!==e.isSubject)return t.isSubject?-1:1;{let r=t.point,n=e.point;if(r[0]===n[0]&&r[1]===n[1])return r=t.otherEvent.point,n=e.otherEvent.point,r[0]===n[0]&&r[1]===n[1]?0:t.contourId>e.contourId?1:-1}return 1===ro(t,e)?1:-1}function uo(t,e,r,n){let o,i,a=t+1;const s=e.length;for(o=e[t].point,a<s&&(i=e[a].point);a<s&&i[0]===o[0]&&i[1]===o[1];){if(!r[a])return a;a++,i=e[a].point}for(a=t-1;r[a]&&a>=n;)a--;return a}function lo(t,e){let r,n;const o=function(t){let e,r,n,o;const i=[];for(r=0,n=t.length;r<n;r++)e=t[r],(e.left&&e.inResult||!e.left&&e.otherEvent.inResult)&&i.push(e);let a=!1;for(;!a;)for(a=!0,r=0,n=i.length;r<n;r++)r+1<n&&1===ro(i[r],i[r+1])&&(o=i[r],i[r]=i[r+1],i[r+1]=o,a=!1);for(r=0,n=i.length;r<n;r++)e=i[r],e.pos=r;for(r=0,n=i.length;r<n;r++)e=i[r],e.left||(o=e.pos,e.pos=e.otherEvent.pos,e.otherEvent.pos=o);return i}(t),i={},a=[];let s;for(r=0,n=o.length;r<n;r++){if(i[r])continue;const t=[[]];o[r].isExteriorRing?2===e&&!o[r].isSubject&&a.length>1?a[a.length-1].push(t[0]):a.push(t):2!==e||o[r].isSubject||0!==a.length?0===a.length?a.push([[t]]):a[a.length-1].push(t[0]):a.push(t);const n=a.length-1;let u=r;const l=o[r].point;for(t[0].push(l);u>=r;)s=o[u],i[u]=!0,s.left?(s.resultInOut=!1,s.contourId=n):(s.otherEvent.resultInOut=!0,s.otherEvent.contourId=n),u=s.pos,i[u]=!0,t[0].push(o[u].point),u=uo(u,o,i,r);u=-1===u?r:u,s=o[u],i[u]=i[s.pos]=!0,s.otherEvent.resultInOut=!0,s.otherEvent.contourId=n}return a}var co=po,fo=po;function po(t,e){if(!(this instanceof po))return new po(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||ho,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)}function ho(t,e){return t<e?-1:t>e?1:0}po.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,r=this.compare,n=e[t];t>0;){var o=t-1>>1,i=e[o];if(r(n,i)>=0)break;e[t]=i,t=o}e[t]=n},_down:function(t){for(var e=this.data,r=this.compare,n=this.length>>1,o=e[t];t<n;){var i=1+(t<<1),a=i+1,s=e[i];if(a<this.length&&r(e[a],s)<0&&(i=a,s=e[a]),r(s,o)>=0)break;e[t]=s,t=i}e[t]=o}},co.default=fo;const go=Math.max,yo=Math.min;let bo=0;function mo(t,e,r,n,o,i){let a,s,u,l,c,f;for(a=0,s=t.length-1;a<s;a++){if(u=t[a],l=t[a+1],c=new Qn(u,!1,void 0,e),f=new Qn(l,!1,c,e),c.otherEvent=f,u[0]===l[0]&&u[1]===l[1])continue;c.contourId=f.contourId=r,i||(c.isExteriorRing=!1,f.isExteriorRing=!1),ro(c,f)>0?f.left=!0:c.left=!0;const s=u[0],p=u[1];o[0]=yo(o[0],s),o[1]=yo(o[1],p),o[2]=go(o[2],s),o[3]=go(o[3],p),n.push(c),n.push(f)}}const vo=[];function wo(t,e,r){"number"==typeof t[0][0][0]&&(t=[t]),"number"==typeof e[0][0][0]&&(e=[e]);let n=function(t,e,r){let n=null;return t.length*e.length==0&&(0===r?n=vo:2===r?n=t:1!==r&&3!==r||(n=0===t.length?e:t)),n}(t,e,r);if(n)return n===vo?null:n;const o=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],a=function(t,e,r,n,o){const i=new co(null,ro);let a,s,u,l,c,f;for(u=0,l=t.length;u<l;u++)for(a=t[u],c=0,f=a.length;c<f;c++)s=0===c,s&&bo++,mo(a[c],!0,bo,i,r,s);for(u=0,l=e.length;u<l;u++)for(a=e[u],c=0,f=a.length;c<f;c++)s=0===c,2===o&&(s=!1),s&&bo++,mo(a[c],!1,bo,i,n,s);return i}(t,e,o,i,r);if(n=function(t,e,r,n,o){let i=null;return(r[0]>n[2]||n[0]>r[2]||r[1]>n[3]||n[1]>r[3])&&(0===o?i=vo:2===o?i=t:1!==o&&3!==o||(i=t.concat(e))),i}(t,e,o,i,r),n)return n===vo?null:n;const s=function(t,e,r,n,o,i){const a=new Zn(so),s=[],u=Math.min(n[2],o[2]);let l,c,f;for(;0!==t.length;){let e=t.pop();if(s.push(e),0===i&&e.point[0]>u||2===i&&e.point[0]>n[2])break;if(e.left){c=l=a.insert(e),f=a.minNode(),l=l!==f?a.prev(l):null,c=a.next(c);const r=l?l.key:null;let n;if(Yn(e,r,i),c&&2===ao(e,c.key,t)&&(Yn(e,r,i),Yn(e,c.key,i)),l&&2===ao(l.key,e,t)){let t=l;t=t!==f?a.prev(t):null,n=t?t.key:null,Yn(r,n,i),Yn(e,r,i)}}else e=e.otherEvent,c=l=a.find(e),l&&c&&(l=l!==f?a.prev(l):null,c=a.next(c),a.remove(e),c&&l&&ao(l.key,c.key,t))}return s}(a,0,0,o,i,r);return lo(s,r)}const jo=(t,e)=>{for(var r=t[0],n=t[1],o=!1,i=0,a=e.length-1;i<e.length;a=i++){var s=e[i][0],u=e[i][1],l=e[a][0],c=e[a][1];u>n!=c>n&&r<(l-s)*(n-u)/(c-u)+s&&(o=!o)}return o},Ao=t=>{if("Point"!==t.geometry.type){switch(t.properties.way_geometry=$n(t.geometry),t.geometry.type){case"Polygon":t.properties.mesure=Gt(t.geometry);break;case"LineString":"function"==typeof length&&(t.properties.mesure=length(t))}t.geometry=qt(t.geometry).geometry}},Eo=t=>{if("no"===t.area)return!1;const e=Object.keys(t);return!(!e.includes("building")||"no"===t.building)||(!(!e.includes("landuse")||"no"===t.landuse)||(!(!e.includes("amenity")||"no"===t.amenity)||(!(!e.includes("leisure")||"no"===t.leisure)||(!(!e.includes("area")||"no"===t.area)||(!(!e.includes("place")||"no"===t.place)||(!(!e.includes("shop")||"no"===t.shop)||(!(!e.includes("boundary")||"no"===t.boundary)||(!(!e.includes("tourism")||"no"===t.tourism)||(!(!e.includes("historic")||"no"===t.historic)||(!(!e.includes("public_transport")||"no"===t.public_transport)||(!(!e.includes("office")||"no"===t.office)||(!(!e.includes("building:part")||"no"===t["building:part"])||(!(!e.includes("military")||"no"===t.military)||(!(!e.includes("ruins")||"no"===t.ruins)||(!(!e.includes("craft")||"no"===t.craft)||(!(!e.includes("golf")||"no"===t.golf)||(!(!e.includes("indoor")||"no"===t.indoor)||(!(!e.includes("highway")||!["services","rest_area","escape","elevator"].includes(t.highway))||(!(!e.includes("waterway")||!["riverbank","dock","boatyard","dam"].includes(t.waterway))||(!(!e.includes("barrier")||!["city_wall","ditch","hedge","retaining_wall","wall","spikes"].includes(t.barrier))||(!(!e.includes("railway")||!["station","turntable","roundhouse","platform"].includes(t.railway))||(!(!e.includes("power")||!["plant","substation","generator","transformer"].includes(t.power))||(!(!e.includes("natural")||["coastline","cliff","ridge","arete","tree_row"].includes(t.natural))||(!(!e.includes("man_made")||["cutline","embankment","pipeline"].includes(t.man_made))||!(!e.includes("aeroway")||["taxiway"].includes(t.aeroway))))))))))))))))))))))))))},xo=(t,e)=>{if(!e)return!0;if(!t)return!1;const r=Object.keys(t);for(let t of r)if(e.includes(t))return!0;return!1},No=(t,e)=>{const r=t.properties.tags;let n={k:"",v:""};for(let t in r)if(e.includes(t))return n={k:t,v:r[t]},n;return null};function Oo(t,e){const r=t.properties.tags;let n={conf:void 0,matchProps:0};for(let t of e){const e=Object.keys(t.tags)[0];let o=0;for(let n in t.tags)r[n]&&r[n]===t.tags[n]&&r[e]?o++:o=0;o>n.matchProps&&(n={conf:t,matchProps:o})}if(n.conf)return n.conf;{const e=t.properties.primaryTag.k?"k":"key",r=t.properties.primaryTag.k?"v":"value",n="".concat(t.properties.primaryTag[e],"/").concat(t.properties.primaryTag[r]),o={key:t.properties.primaryTag[e],icon:"wiki-question",markerColor:"#000000",lbl:{en:"".concat(t.properties.primaryTag[e]," = ").concat(t.properties.primaryTag[r])},presets:[],geometry:[],tags:{},id:n,unknowTags:!0};return o.tags[t.properties.primaryTag[e]]=t.properties.primaryTag[r],o}}function _o(t){t.properties.tags.name?t.properties._name=t.properties.tags.name:t.properties.tags.ref&&(t.properties._name=t.properties.tags.ref),t.properties.meta.timestamp&&(t.properties.time=new Date(t.properties.meta.timestamp).getTime()),t.properties.tags.fixme&&(t.properties.fixme=!0)}function Po(t,e){let r,n=Oo(t,e);return r="node"===t.properties.type?"circle":"LineString"===t.properties.way_geometry.type||"MultiLineString"===t.properties.way_geometry.type?"penta":"Polygon"===t.properties.way_geometry.type||"MultiPolygon"===t.properties.way_geometry.type?"square":"star",t.properties.icon=n.icon?n.icon:"",t.properties.marker="".concat(r,"-").concat(n.markerColor,"-").concat(t.properties.icon),t.properties.hexColor=n.markerColor,t.properties.configId=n.id,n.unknowTags&&(t.properties.unknowTags=!0),n.deprecated?t.properties.deprecated=n.deprecated:t.properties.deprecated&&delete t.properties.deprecated,_o(t),t}const Co=(t,e)=>{if(!e)return t;let r=[];for(let t=0;t<e.features.length;t++)r.push(e.features[t].id);for(let e=t.features.length-1;e>=0;e--)r.includes(t.features[e].id)&&t.features.splice(e,1);return $n(t)},So=(t,e)=>{if(e&&0!==e.length){return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"MultiPolygon",coordinates:wo(e.geometry.coordinates,t.geometry.coordinates,1)}}]}}return{type:"FeatureCollection",features:[t]}};function ko(t){return t.replace(/&amp;/g,"&").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">")}exports.addAttributesToFeature=_o,exports.convert=(t,e)=>{let r=null;e&&e.primaryKeys&&(r=e.primaryKeys);const n=lt.parse(t,{attributeNamePrefix:"",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!1,ignoreNameSpace:!1,allowBooleanAttributes:!0,parseNodeValue:!1,parseAttributeValue:!1,trimValues:!1,cdataTagName:!1,cdataPositionChar:"\\c",attrValueProcessor:t=>ko(t),tagValueProcessor:t=>ko(t)}).osm,o={minlat:Number(n.bounds.minlat),minlon:Number(n.bounds.minlon),maxlat:Number(n.bounds.maxlat),maxlon:Number(n.bounds.maxlon)},i=[o.minlon,o.minlat,o.maxlon,o.maxlat],a=t=>{Array.isArray(t)||(t=[t]);const e={};for(let r=0;r<t.length;r++)e[t[r].k]=t[r].v;return e},s=(t,e)=>{const r=t[0]==t[t.length-1]?"Polygon":"LineString";let n=[];for(let r=0;r<t.length;r++){const o="node/".concat(t[r]);e[o]&&n.push(e[o].geometry.coordinates)}return"LineString"==r?{type:"LineString",coordinates:n}:"Polygon"==r?{type:"Polygon",coordinates:[n]}:void 0},u=(t,e,r)=>{const n=$n(t);let o=Array.isArray(n.member)?n.member:[n.member];n.tainted=!1;for(let t=0;t<o.length;t++){let r=o[t];const i="way/".concat(r.ref);if(e[i]){let t,n=e[i].geometry;"LineString"===n.type?(r.typeGeom="LineString",t=$n(n.coordinates)):"Polygon"===n.type&&(r.typeGeom="Polygon",t=$n(n.coordinates[0])),r.ring=t}else r.ring=null,n.tainted=!0}if(n.tainted)return null;Array.isArray(o)||(o=[o]);const i=o.filter((t=>"outer"===t.role&&"Polygon"===t.typeGeom&&t.ring)),a=o.filter((t=>"inner"===t.role&&"Polygon"===t.typeGeom&&t.ring)),s=o.filter((t=>"outer"===t.role&&"LineString"===t.typeGeom&&t.ring)),u=o.filter((t=>"inner"===t.role&&"LineString"===t.typeGeom&&t.ring));if(0===i.length&&0===s.length)return null;if(s.length>0){const t=l(s.map((t=>t.ring)));for(let e of t)i.push({type:"way",ref:"",role:"outer",typeGeom:"Polygon",ring:e})}if(u.length>0){const t=l(u.map((t=>t.ring)));for(let e of t)a.push({type:"way",ref:"",role:"inner",typeGeom:"Polygon",ring:e})}if(1==i.length){const t=[i[0].ring];for(let e of a)t.push(e.ring);return{type:"Polygon",coordinates:t}}{const t=i.map((t=>[t.ring]));for(let e of a)for(let r=0;r<t.length;r++){let n=t[r][0];const o=e.ring[0];jo(o,n)&&t[r].push(e.ring)}return{type:"MultiPolygon",coordinates:t}}},l=t=>{let e=[],r=t[0].slice();t.splice(0,1);let n=r[0].toString(),o=r[r.length-1].toString(),i=0;for(;0!=t.length&&i<t.length;)t[i][0].toString()==o?(t[i].splice(0,1),r=[...r,...t[i]],t.splice(i,1),n=r[0].toString(),o=r[r.length-1].toString(),i=0):t[i][t[i].length-1].toString()==n?(t[i].splice(t[i].length-1,1),r=[...t[i],...r],t.splice(i,1),n=r[0].toString(),o=r[r.length-1].toString(),i=0):t[i][0].toString()==n?(t[i].splice(0,1),r=[...t[i].reverse(),...r],t.splice(i,1),n=r[0].toString(),o=r[r.length-1].toString(),i=0):t[i][t[i].length-1].toString()==o?(t[i].splice(t[i].length-1,1),r=[...r,...t[i].reverse()],t.splice(i,1),n=r[0].toString(),o=r[r.length-1].toString(),i=0):i++,n==o&&(e.push(r),t.length>0&&(r=t[0].slice(),t.splice(0,1),n=r[0].toString(),o=r[r.length-1].toString(),i=0));return e},c={};Array.isArray(n.node)||(n.node=n.node?[n.node]:[]);for(let t of n.node){const e="node/".concat(t.id),r={type:"Feature",id:"node/".concat(t.id),properties:{type:"node",id:t.id,meta:{timestamp:t.timestamp,version:t.version,changeset:t.changeset,user:t.user,uid:t.uid}},geometry:{type:"Point",coordinates:[Number(t.lon),Number(t.lat)]}};t.tag&&(r.properties.tags=a(t.tag)),c[e]=r}Array.isArray(n.way)||(n.way=n.way?[n.way]:[]);const f={};for(let t of n.way){const e="way/".concat(t.id),r={type:"Feature",id:"way/".concat(t.id),properties:{type:"way",id:t.id,meta:{timestamp:t.timestamp,version:t.version,changeset:t.changeset,user:t.user,uid:t.uid}}};if(t.tag&&(r.properties.tags=a(t.tag)),t.nd){const e=[];for(let r of t.nd){const n=r.ref;e.push(n);let o=c["node/".concat(n)];o&&(o.properties.usedByWays||(o.properties.usedByWays=[]),o.properties.usedByWays.push("way/".concat(t.id)))}r.ndRefs=e,r.geometry=s(e,c)}f[e]=r}const p={};Array.isArray(n.relation)||(n.relation=n.relation?[n.relation]:[]);for(let t of n.relation){const e="".concat(t.id),r={type:"Feature",id:"".concat(t.id),properties:{type:"relation",id:t.id,meta:{timestamp:t.timestamp,version:t.version,changeset:t.changeset,user:t.user,uid:t.uid}},member:t.member,tainted:!1};t.tag&&(r.properties.tags=a(t.tag)),Array.isArray(t.member)||(t.member=[t.member]);for(let e of t.member){const t="".concat(e.type,"/").concat(e.ref);let n="node"==e.type?c:f;n[t]?(n[t].properties.relations||(n[t].properties.relations=[]),n[t].properties.relations.push({rel:r.id,reltags:r.properties.tags,role:e.role})):r.tainted=!0}p[e]=r}for(let t in p){const e=p[t];if("multipolygon"===e.properties.tags.type){const t=u(e,f);t&&(e.geometry=t)}}const h=((t,n,o,i,a)=>{const s=[];for(let r in t)if(t[r].properties.tags,t[r].geometry&&t[r].properties.tags)if(_o(t[r]),e&&i){let n=No(t[r],a);n&&(t[r].properties.primaryTag=n,Po(t[r],e.tagConfig),s.push(t[r]))}else s.push(t[r]);for(let t in n)if(n[t].properties.tags,n[t].geometry&&n[t].properties.tags)if(_o(n[t]),"Polygon"!=n[t].geometry.type&&"MultiPolygon"!=n[t].geometry.type||Eo(n[t].properties.tags)||(n[t].geometry.coordinates=n[t].geometry.coordinates[0],n[t].geometry.type="Polygon"==n[t].geometry.type?"LineString":"MultiLineString"),Ao(n[t]),e&&e.tagConfig){let r=No(n[t],a);r&&(n[t].properties.primaryTag=r,Po(n[t],e.tagConfig),s.push(n[t]))}else s.push(n[t]);for(let t in o){const n=o[t].properties.tags;if(o[t].geometry&&o[t].properties.tags&&xo(n,r))if(_o(o[t]),"Polygon"!=o[t].geometry.type&&"MultiPolygon"!=o[t].geometry.type||Eo(o[t].properties.tags)||(o[t].geometry.coordinates=o[t].geometry.coordinates[0],o[t].geometry.type="Polygon"==o[t].geometry.type?"LineString":"MultiLineString"),Ao(o[t]),e&&e.tagConfig){let r=No(o[t],a);r&&(o[t].properties.primaryTag=r,Po(o[t],e.tagConfig),s.push(o[t]))}else s.push(o[t])}return s})(c,f,p,e.tagConfig,e.primaryKeys),g={type:"FeatureCollection",features:h};if(e&&e.oldGeojson&&e.geojsonChanged){const t=Number.isInteger(e.limitFeatures)?e.limitFeatures:9999,r=Xt(i);if(e.oldGeojson.features.length>t){return{geojson:Co(g,e.geojsonChanged),geojsonBbox:So(r,null)}}{const t=((t,e,r,n)=>{let o=t.features,i=e.features;if(!o||0==o.length)return e;let a=[];for(let t=0;t<o.length;t++)Wt(o[t],r)&&a.push(o[t].id);for(let t=0;t<i.length;t++){let e=i[t].id;for(let r=0;r<o.length;r++){if(e==o[r].id){o[r]=i[t],a.splice(a.indexOf(e),1);break}r==o.length-1&&o.push(i[t])}}for(let t=0;t<a.length;t++){let e=a[t];for(let t=0;t<o.length;t++)if(o[t].id==e){o.splice(t,1);break}}return Co(t,n)})(e.oldGeojson,g,r,e.geojsonChanged);return{geojson:t,geojsonBbox:So(r,e.oldBboxFeature)}}}return{geojson:g,geojsonBbox:null}},exports.getConfigTag=Oo,exports.setIconStyle=Po;
